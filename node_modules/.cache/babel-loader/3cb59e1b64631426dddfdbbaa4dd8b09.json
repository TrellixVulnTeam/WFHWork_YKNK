{"ast":null,"code":"import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Header from\"../../components/Header\";import Footer from\"../../components/Footer\";import tradie_leads_1 from\"../../assets/images/1601545174666_user-profile_2020_10_01_17_39_31_786_ 1.jpg\";import tradie_leads_2 from\"../../assets/icons/icon-deadline.png\";import tradie_leads_3 from\"../../assets/icons/icon-location.png\";import tradie_leads_4 from\"../../assets/images/professional-tradie.jpg\";import{useDispatch,useSelector}from\"react-redux\";import*as Actions from\"../../redux/directory/action\";import moment from\"moment\";import ViewDetailPoppup from\"./ViewDetailPopup\";import TakeDone from\"./TakeDonePopup\";import{Link,useHistory}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Index=function Index(){var history=useHistory();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),userData=_useSelector.userData;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),viewDetailPopup=_useState2[0],setViewDetailPopup=_useState2[1];var _useState3=useState(\"current\"),_useState4=_slicedToArray(_useState3,2),tabSelect=_useState4[0],setTabSelect=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),viewData=_useState6[0],setViewData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),alert=_useState8[0],setAlert=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),alertData=_useState10[0],setAlertData=_useState10[1];// const [tradieLeads, setTradieLeads] = useState([]);\nvar provider_leads_request=Actions.provider_leads_request,provider_leads_history_request=Actions.provider_leads_history_request;var _useSelector2=useSelector(function(state){return state.directory;}),providerJobAccept=_useSelector2.providerJobAccept;var _useSelector3=useSelector(function(state){return state.directory;}),providerLeads=_useSelector3.providerLeads,providerLeadsHistory=_useSelector3.providerLeadsHistory,singleTradieRes=_useSelector3.singleTradieRes,reviewRes=_useSelector3.reviewRes,disputeRes=_useSelector3.disputeRes;var providerAccepted=JSON.parse(localStorage.getItem(\"provideLeadAction\"));var config={headers:{\"Access-Control-Allow-Origin\":\"*\",\"Content-Type\":\"application/json\",Authorization:\"my-auth-token\"}};// useEffect(() => {\n//   let userInfo = JSON.parse(localStorage.getItem(\"tepatredieUserInfo\"));\n//   var UserLeads = {\n//     access_token: userInfo.access_token,\n//     device_id: userInfo.device_id,\n//     api_key: userInfo.api_key,\n//     device_type: userInfo.device_type,\n//     lead_type: \"new\",\n//     page: 1,\n//     uid: userInfo.uid,\n//   };\n//   axios\n//     .post(\"https://api.tapatradie.com/api/provider-leads\", UserLeads, config)\n//     .then((res) => setTradieLeads(res?.data));\n// }, []);\nuseEffect(function(){dispatch(provider_leads_request());dispatch(provider_leads_history_request());},[providerJobAccept,singleTradieRes,reviewRes,disputeRes]);var handleViewDetailLead=function handleViewDetailLead(leads){setViewData(leads);setViewDetailPopup(true);};var handleAlert=function handleAlert(viewData,e){e.preventDefault();setAlertData(viewData);setAlert(true);};var leadStatus=providerLeadsHistory===null||providerLeadsHistory===void 0?void 0:providerLeadsHistory.map(function(leads){if(leads.dispute==1){if(leads.user_status==\"completed\"){return\"Completed\";}else{return\"Disputed\";}}else{if(leads.status==\"deleted\"){return\"Completed\";}else if(leads.status==\"cancel\"){return\"Settled\";}else{if(leads.user_status==\"accept\"){return\"Completed\";}else if(leads.user_status=\"completed\"){return\"Completed\";}else if(leads.user_status=\"deleted\"){return\"Completed\";}else{return\"Declined\";}}}});var Back=function Back(){history.goBack();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"section\",{className:\"section-top section-top--calender\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"section-top__title\",children:[\"My \",/*#__PURE__*/_jsx(\"span\",{children:\"Leads\"})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"section section--calender\",children:/*#__PURE__*/_jsx(\"div\",{className:\"calender\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"a\",{onClick:Back,className:\"calender__back\",style:{cursor:\"pointer\"},children:[\" \",\"Back\",\" \"]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"calender__nav\",children:[/*#__PURE__*/_jsx(\"span\",{href:\"javascript:void(0)\",className:tabSelect===\"current\"?\"calender__nav-active\":\"\",onClick:function onClick(){setTabSelect(\"current\");},children:\"Current\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setTabSelect(\"history\");},className:tabSelect===\"history\"?\"calender__nav-active\":\"\",children:\"History\"}),/*#__PURE__*/_jsx(\"span\",{href:\"javascript:void(0)\",children:\" \"})]}),tabSelect===\"current\"?/*#__PURE__*/_jsx(\"div\",{className:\"calender__events\",children:Object.keys(providerLeads).length>0?providerLeads===null||providerLeads===void 0?void 0:providerLeads.map(function(leads){var _leads$title,_leads$title2;return/*#__PURE__*/_jsxs(\"div\",{className:\"event\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"javascript:void(0)\",className:\"event__budge\",children:[leads.dispute==1?leads.user_status==\"completed\"?/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}):\"Disputed\":leads.status==\"deleted\"?\"Deleted\":leads.user_status==\"pending\"&&leads.provider_status==\"pending\"?\"Pending\":leads.status==\"cancel\"?\"Settled\":leads.user_status==\"accept\"?\"Accepted\":leads.provider_status==\"accept\"?\"Accepted\":leads.provider_status=\"completed\"?\"Completed\":leads.user_status=\"deleted\"?\"Deleted\":\"Declined\",leads.user_status==\"reject\"?localStorage.removeItem(\"provideLeadAction\"):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event__what event__what--img\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:leads.profile_pic?\"https://api.tapatradie.com/uploads/\"+leads.profile_pic:\"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"h4\",{style:{textTransform:\"capitalize\"},children:leads.full_name})]}),/*#__PURE__*/_jsxs(\"span\",{style:{marginBottom:\"20px\",fontSize:\"1.8rem\",display:\"flex\",justifyContent:\"space-around\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Title\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",(leads===null||leads===void 0?void 0:(_leads$title=leads.title)===null||_leads$title===void 0?void 0:_leads$title.charAt(0).toUpperCase())+(leads===null||leads===void 0?void 0:(_leads$title2=leads.title)===null||_leads$title2===void 0?void 0:_leads$title2.slice(1))]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:tradie_leads_2}),moment(leads.time,[\"HH.mm.ss\"]).format(\"hh:mm A\"),\" on \",moment(leads.date).format(\"ll\")]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:tradie_leads_3}),leads.address]}),providerAccepted.action==\"accept\"&&providerAccepted.id==leads.id?/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn-primary\"//  onClick={() => {\n//    handleViewDetailLead(leads);\n//  }}\n,onClick:function onClick(e){handleAlert(leads,e);},children:\"Task Done\"}):/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"btn-primary\",onClick:function onClick(){handleViewDetailLead(leads);},children:\"View Details\"})]});}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-listing-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://sample.jploftsolutions.in/tapImages/no-listing.png\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Leads Found\"})]})}):null,tabSelect===\"history\"?/*#__PURE__*/_jsx(_Fragment,{children:Object.keys(providerLeadsHistory).length>0?/*#__PURE__*/_jsx(\"div\",{className:\"calender__events\",children:providerLeadsHistory.map(function(leads){return/*#__PURE__*/_jsxs(\"div\",{className:\"event\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"javascript:void(0)\",className:\"event__budge\",children:leads.dispute==1?leads.user_status==\"completed\"?/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}):\"Disputed\":leads.status==\"deleted\"?\"Completed\":leads.status==\"cancel\"?\"Settled\":leads.user_status=\"completed\"?\"Completed\":leads.user_status=\"deleted\"?\"Completed\":\"Declined\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"event__what event__what--img\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:leads.profile_pic!==\"\"?\"https://api.tapatradie.com/uploads/\"+leads.profile_pic:\"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"h4\",{style:{textTransform:\"capitalize\"},children:leads.full_name})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:tradie_leads_2}),moment(leads.time,[\"HH.mm.ss\"]).format(\"hh:mm A\"),\" \",\"on \",moment(leads.date).format(\"ll\")]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:tradie_leads_3}),leads.address]})]});})}):/*#__PURE__*/_jsx(\"div\",{className:\"calender__events\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"no-listing-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://sample.jploftsolutions.in/tapImages/no-listing.png\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No History Found\"})]})})}):null]})})}),viewDetailPopup&&/*#__PURE__*/_jsx(ViewDetailPoppup,{setViewDetailPopup:setViewDetailPopup,viewData:viewData}),\" \",alert&&/*#__PURE__*/_jsx(TakeDone,{setAlert:setAlert,alertData:alertData,setViewDetailPopup:setViewDetailPopup}),/*#__PURE__*/_jsx(\"section\",{className:\"section section--left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"professional-tradie\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"professional-tradie__description\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"professional-tradie__title\",children:\"Are you a Professional Tradie?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"If you would like to be part of our Tradie community and are ready to meet new clients today please continue so we can welcome you onboard.\"}),/*#__PURE__*/_jsx(Link,{to:\"/about-us\",className:\"btn-primary\",children:\"Learn More\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"professional-tradie__image\",children:/*#__PURE__*/_jsx(\"img\",{src:tradie_leads_4,alt:\"\"})})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Index;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/TradieLeads/index.js"],"names":["React","useState","useEffect","Header","Footer","tradie_leads_1","tradie_leads_2","tradie_leads_3","tradie_leads_4","useDispatch","useSelector","Actions","moment","ViewDetailPoppup","TakeDone","Link","useHistory","axios","Index","history","dispatch","state","auth","userData","viewDetailPopup","setViewDetailPopup","tabSelect","setTabSelect","viewData","setViewData","alert","setAlert","alertData","setAlertData","provider_leads_request","provider_leads_history_request","directory","providerJobAccept","providerLeads","providerLeadsHistory","singleTradieRes","reviewRes","disputeRes","providerAccepted","JSON","parse","localStorage","getItem","config","headers","Authorization","handleViewDetailLead","leads","handleAlert","e","preventDefault","leadStatus","map","dispute","user_status","status","Back","goBack","cursor","Object","keys","length","provider_status","removeItem","profile_pic","textTransform","full_name","marginBottom","fontSize","display","justifyContent","title","charAt","toUpperCase","slice","time","format","date","address","action","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Header from \"../../components/Header\";\r\nimport Footer from \"../../components/Footer\";\r\n\r\nimport tradie_leads_1 from \"../../assets/images/1601545174666_user-profile_2020_10_01_17_39_31_786_ 1.jpg\";\r\nimport tradie_leads_2 from \"../../assets/icons/icon-deadline.png\";\r\nimport tradie_leads_3 from \"../../assets/icons/icon-location.png\";\r\nimport tradie_leads_4 from \"../../assets/images/professional-tradie.jpg\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport * as Actions from \"../../redux/directory/action\";\r\nimport moment from \"moment\";\r\nimport ViewDetailPoppup from \"./ViewDetailPopup\";\r\nimport TakeDone from \"./TakeDonePopup\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst Index = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { userData } = useSelector((state) => state.auth);\r\n  const [viewDetailPopup, setViewDetailPopup] = useState(false);\r\n  const [tabSelect, setTabSelect] = useState(\"current\");\r\n  const [viewData, setViewData] = useState([]);\r\n  const [alert, setAlert] = useState(false);\r\n  const [alertData, setAlertData] = useState([]);\r\n  // const [tradieLeads, setTradieLeads] = useState([]);\r\n  const { provider_leads_request, provider_leads_history_request } = Actions;\r\n  const { providerJobAccept } = useSelector((state) => state.directory);\r\n  const {\r\n    providerLeads,\r\n    providerLeadsHistory,\r\n    singleTradieRes,\r\n    reviewRes,\r\n    disputeRes,\r\n  } = useSelector((state) => state.directory);\r\n  const providerAccepted = JSON.parse(\r\n    localStorage.getItem(\"provideLeadAction\")\r\n  );\r\n\r\n  const config = {\r\n    headers: {\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"my-auth-token\",\r\n    },\r\n  };\r\n  // useEffect(() => {\r\n  //   let userInfo = JSON.parse(localStorage.getItem(\"tepatredieUserInfo\"));\r\n  //   var UserLeads = {\r\n  //     access_token: userInfo.access_token,\r\n  //     device_id: userInfo.device_id,\r\n  //     api_key: userInfo.api_key,\r\n  //     device_type: userInfo.device_type,\r\n  //     lead_type: \"new\",\r\n  //     page: 1,\r\n  //     uid: userInfo.uid,\r\n  //   };\r\n  //   axios\r\n  //     .post(\"https://api.tapatradie.com/api/provider-leads\", UserLeads, config)\r\n  //     .then((res) => setTradieLeads(res?.data));\r\n  // }, []);\r\n  useEffect(() => {\r\n    dispatch(provider_leads_request());\r\n    dispatch(provider_leads_history_request());\r\n  }, [providerJobAccept, singleTradieRes, reviewRes, disputeRes]);\r\n\r\n  const handleViewDetailLead = (leads) => {\r\n    setViewData(leads);\r\n    setViewDetailPopup(true);\r\n  };\r\n\r\n  const handleAlert = (viewData, e) => {\r\n    e.preventDefault();\r\n    setAlertData(viewData);\r\n    setAlert(true);\r\n  };\r\n  const leadStatus = providerLeadsHistory?.map((leads) => {\r\n    if (leads.dispute == 1) {\r\n      if (leads.user_status == \"completed\") {\r\n        return \"Completed\";\r\n      } else {\r\n        return \"Disputed\";\r\n      }\r\n    } else {\r\n      if (leads.status == \"deleted\") {\r\n        return \"Completed\";\r\n      } else if (leads.status == \"cancel\") {\r\n        return \"Settled\";\r\n      } else {\r\n        if (leads.user_status == \"accept\") {\r\n          return \"Completed\";\r\n        } else if ((leads.user_status = \"completed\")) {\r\n          return \"Completed\";\r\n        } else if ((leads.user_status = \"deleted\")) {\r\n          return \"Completed\";\r\n        } else {\r\n          return \"Declined\";\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  const Back = () => {\r\n    history.goBack();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {/* <!-- My Leads --> */}\r\n      <section className=\"section-top section-top--calender\">\r\n        <h2 className=\"section-top__title\">\r\n          My <span>Leads</span>\r\n        </h2>\r\n      </section>\r\n      <section className=\"section section--calender\">\r\n        <div className=\"calender\">\r\n          <div>\r\n            <a\r\n              onClick={Back}\r\n              className=\"calender__back\"\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              {\" \"}\r\n              Back{\" \"}\r\n            </a>\r\n            <nav className=\"calender__nav\">\r\n              <span\r\n                href=\"javascript:void(0)\"\r\n                className={\r\n                  tabSelect === \"current\" ? \"calender__nav-active\" : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setTabSelect(\"current\");\r\n                }}\r\n              >\r\n                Current\r\n              </span>\r\n              <span\r\n                onClick={() => {\r\n                  setTabSelect(\"history\");\r\n                }}\r\n                className={\r\n                  tabSelect === \"history\" ? \"calender__nav-active\" : \"\"\r\n                }\r\n              >\r\n                History\r\n              </span>\r\n              <span href=\"javascript:void(0)\"> </span>\r\n            </nav>\r\n            {tabSelect === \"current\" ? (\r\n              <div className=\"calender__events\">\r\n                {Object.keys(providerLeads).length > 0 ? (\r\n                  providerLeads?.map((leads) => (\r\n                    <div className=\"event\">\r\n                      <a href=\"javascript:void(0)\" className=\"event__budge\">\r\n                        {leads.dispute == 1 ? (\r\n                          leads.user_status == \"completed\" ? (\r\n                            <p>Completed</p>\r\n                          ) : (\r\n                            \"Disputed\"\r\n                          )\r\n                        ) : leads.status == \"deleted\" ? (\r\n                          \"Deleted\"\r\n                        ) : leads.user_status == \"pending\" &&\r\n                          leads.provider_status == \"pending\" ? (\r\n                          \"Pending\"\r\n                        ) : leads.status == \"cancel\" ? (\r\n                          \"Settled\"\r\n                        ) : leads.user_status == \"accept\" ? (\r\n                          \"Accepted\"\r\n                        ) : leads.provider_status == \"accept\" ? (\r\n                          \"Accepted\"\r\n                        ) : (\r\n                          (leads.provider_status = \"completed\"\r\n                            ? \"Completed\"\r\n                            : (leads.user_status = \"deleted\"\r\n                                ? \"Deleted\"\r\n                                : \"Declined\"))\r\n                        )}\r\n                        {leads.user_status == \"reject\"\r\n                          ? localStorage.removeItem(\"provideLeadAction\")\r\n                          : \"\"}\r\n                      </a>\r\n                      <div className=\"event__what event__what--img\">\r\n                        <div>\r\n                          <img\r\n                            src={\r\n                              leads.profile_pic\r\n                                ? `https://api.tapatradie.com/uploads/` +\r\n                                  leads.profile_pic\r\n                                : \"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\"\r\n                            }\r\n                            alt=\"\"\r\n                          />\r\n                        </div>\r\n                        <h4 style={{ textTransform: \"capitalize\" }}>\r\n                          {leads.full_name}\r\n                        </h4>\r\n                      </div>\r\n                      <span\r\n                        style={{\r\n                          marginBottom: \"20px\",\r\n                          fontSize: \"1.8rem\",\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-around\",\r\n                        }}\r\n                      >\r\n                        <h4>Title</h4>\r\n                        <p>\r\n                          {\" \"}\r\n                          {leads?.title?.charAt(0).toUpperCase() +\r\n                            leads?.title?.slice(1)}\r\n                        </p>\r\n                      </span>\r\n                      <p className=\"event__when-where\">\r\n                        <img src={tradie_leads_2} />\r\n                        {moment(leads.time, [\"HH.mm.ss\"]).format(\r\n                          \"hh:mm A\"\r\n                        )} on {moment(leads.date).format(\"ll\")}\r\n                      </p>\r\n                      <p className=\"event__when-where\">\r\n                        <img src={tradie_leads_3} />\r\n                        {leads.address}\r\n                      </p>\r\n\r\n                      {providerAccepted.action == \"accept\" &&\r\n                      providerAccepted.id == leads.id ? (\r\n                        <a\r\n                          href=\"javascript:void(0)\"\r\n                          className=\"btn-primary\"\r\n                          //  onClick={() => {\r\n                          //    handleViewDetailLead(leads);\r\n                          //  }}\r\n                          onClick={(e) => {\r\n                            handleAlert(leads, e);\r\n                          }}\r\n                        >\r\n                          Task Done\r\n                        </a>\r\n                      ) : (\r\n                        <a\r\n                          href=\"javascript:void(0)\"\r\n                          className=\"btn-primary\"\r\n                          onClick={() => {\r\n                            handleViewDetailLead(leads);\r\n                          }}\r\n                        >\r\n                          View Details\r\n                        </a>\r\n                      )}\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"no-listing-box\">\r\n                    <img src=\"https://sample.jploftsolutions.in/tapImages/no-listing.png\" />\r\n                    <p>No Leads Found</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : null}\r\n            {tabSelect === \"history\" ? (\r\n              <>\r\n                {Object.keys(providerLeadsHistory).length > 0 ? (\r\n                  <div className=\"calender__events\">\r\n                    {providerLeadsHistory.map((leads) => (\r\n                      <div className=\"event\">\r\n                        <a href=\"javascript:void(0)\" className=\"event__budge\">\r\n                          {leads.dispute == 1 ? (\r\n                            leads.user_status == \"completed\" ? (\r\n                              <p>Completed</p>\r\n                            ) : (\r\n                              \"Disputed\"\r\n                            )\r\n                          ) : leads.status == \"deleted\" ? (\r\n                            \"Completed\"\r\n                          ) : leads.status == \"cancel\" ? (\r\n                            \"Settled\"\r\n                          ) : (\r\n                            (leads.user_status = \"completed\"\r\n                              ? \"Completed\"\r\n                              : (leads.user_status = \"deleted\"\r\n                                  ? \"Completed\"\r\n                                  : \"Declined\"))\r\n                          )}\r\n                        </a>\r\n                        <div className=\"event__what event__what--img\">\r\n                          <div>\r\n                            <img\r\n                              src={\r\n                                leads.profile_pic !== \"\"\r\n                                  ? `https://api.tapatradie.com/uploads/` +\r\n                                    leads.profile_pic\r\n                                  : \"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\"\r\n                              }\r\n                              alt=\"\"\r\n                            />\r\n                          </div>\r\n                          <h4 style={{ textTransform: \"capitalize\" }}>\r\n                            {leads.full_name}\r\n                          </h4>\r\n                        </div>\r\n                        <p className=\"event__when-where\">\r\n                          <img src={tradie_leads_2} />\r\n                          {moment(leads.time, [\"HH.mm.ss\"]).format(\r\n                            \"hh:mm A\"\r\n                          )}{\" \"}\r\n                          on {moment(leads.date).format(\"ll\")}\r\n                        </p>\r\n                        <p className=\"event__when-where\">\r\n                          <img src={tradie_leads_3} />\r\n                          {leads.address}\r\n                        </p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"calender__events\">\r\n                    <div className=\"no-listing-box\">\r\n                      <img src=\"https://sample.jploftsolutions.in/tapImages/no-listing.png\" />\r\n                      <p>No History Found</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </section>\r\n      {viewDetailPopup && (\r\n        <ViewDetailPoppup\r\n          setViewDetailPopup={setViewDetailPopup}\r\n          viewData={viewData}\r\n        />\r\n      )}{\" \"}\r\n      {alert && (\r\n        <TakeDone\r\n          setAlert={setAlert}\r\n          alertData={alertData}\r\n          setViewDetailPopup={setViewDetailPopup}\r\n        />\r\n      )}\r\n      {/* <!-- Are you a Professional Tradie? --> */}\r\n      {/* {userData.access === \"provider\" ? (\r\n        \"\"\r\n      ) : ( */}\r\n      <section className=\"section section--left\">\r\n        <div className=\"professional-tradie\">\r\n          <div className=\"professional-tradie__description\">\r\n            <h3 className=\"professional-tradie__title\">\r\n              Are you a Professional Tradie?\r\n            </h3>\r\n            <p>\r\n              If you would like to be part of our Tradie community and are ready\r\n              to meet new clients today please continue so we can welcome you\r\n              onboard.\r\n            </p>\r\n            <Link to=\"/about-us\" className=\"btn-primary\">\r\n              Learn More\r\n            </Link>\r\n          </div>\r\n          <div className=\"professional-tradie__image\">\r\n            <img src={tradie_leads_4} alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </section>\r\n      {/* )} */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}