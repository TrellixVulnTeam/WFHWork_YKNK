{"ast":null,"code":"import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{ReactComponent as Close}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/icon-cancelpopup.svg\";import*as Actions from\"../../redux/directory/action\";import{useSelector,useDispatch}from\"react-redux\";import{useParams}from\"react-router-dom\";import AlertPopup from\"./Alertpopup\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";toast.configure();var ViewLeads=function ViewLeads(_ref){var setViewDetailPopup=_ref.setViewDetailPopup,viewData=_ref.viewData;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.directory;}),providerJobAccept=_useSelector.providerJobAccept;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),alert=_useState2[0],setAlert=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),alertData=_useState4[0],setAlertData=_useState4[1];var provider_job_accept_request=Actions.provider_job_accept_request;// const handleClose = () => {\n//   setViewDetailPopup(false);\n// };\nvar handleAlert=function handleAlert(viewData,e){e.preventDefault();setViewDetailPopup(true);setAlertData(viewData);setAlert(true);};var accepted=function accepted(alertData,e){e.preventDefault();var data={action:\"accept\",id:alertData===null||alertData===void 0?void 0:alertData.id,type:alertData.type};dispatch(provider_job_accept_request(data));localStorage.setItem(\"provideLeadAction\",JSON.stringify(\"accept\"));};useEffect(function(){if(providerJobAccept.success==1){toast.success(providerJobAccept.message,{position:\"bottom-left\",autoClose:2000,size:\"small\"});setViewDetailPopup(false);}// setTimeout(() => {\n//   dispatch({ type: \"PROVIDER_JOB_ACCEPT_SUCCESS\", payload: \"\" });\n// }, 1000);\n},[providerJobAccept]);var tConvert=function tConvert(time){// Check correct time format and split into components\ntime=time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/)||[time];if(time.length>1){// If time format correct\ntime=time.slice(1);// Remove full string match value\ntime[5]=+time[0]<12?\"AM\":\"PM\";// Set AM/PM\ntime[0]=+time[0]%12||12;// Adjust hours\n}return time.join(\"\");// return adjusted time or original string\n};var dateConvert=function dateConvert(data){return new Date(data).toLocaleString(\"en-us\",{month:\"short\",year:\"numeric\",day:\"numeric\"});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"user-lead-modal popup\",style:{zIndex:3},children:[/*#__PURE__*/_jsxs(\"form\",{className:\"popup__form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"first\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lead-img-box\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\",alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lead-content-box\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"heading\",children:viewData.full_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"date\",children:[viewData&&tConvert(viewData.time),\" on\",\" \",viewData&&dateConvert(viewData.date)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"city\",children:[viewData.city,\" ,\"]})]}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){setViewDetailPopup(false);e.target.parentElement.parentElement.parentElement.style.display=\"none\";},className:\"Closesvg\",style:{marginBottom:\"123px\",marginRight:\"-12px\"},children:/*#__PURE__*/_jsx(Close,{width:\"30px\",height:\"30px\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"second\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job_title\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Job Title\"}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:viewData.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service_required\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Service Required\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"description\",children:[\"Required \",viewData.service_name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"service_type\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Service Type\"}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:viewData.tradie_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job_description\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:\"Job Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:viewData.detail})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-lead-modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary accept\",onClick:function onClick(e){accepted(viewData,e);},children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary reject\",onClick:function onClick(e){handleAlert(viewData,e);},children:\"Reject\"})]})]}),alert&&/*#__PURE__*/_jsx(AlertPopup,{setAlert:setAlert,alertData:alertData,setViewDetailPopup:setViewDetailPopup})]})});};export default ViewLeads;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/TradieLeads/ViewDetailPopup.js"],"names":["React","useEffect","useState","useHistory","Actions","useSelector","useDispatch","useParams","AlertPopup","toast","configure","ViewLeads","setViewDetailPopup","viewData","id","history","dispatch","state","directory","providerJobAccept","alert","setAlert","alertData","setAlertData","provider_job_accept_request","handleAlert","e","preventDefault","accepted","data","action","type","localStorage","setItem","JSON","stringify","success","message","position","autoClose","size","tConvert","time","toString","match","length","slice","join","dateConvert","Date","toLocaleString","month","year","day","zIndex","full_name","date","city","target","parentElement","style","display","marginBottom","marginRight","title","service_name","tradie_type","detail"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ReactComponent as Close } from \"../../assets/icons/icon-cancelpopup.svg\";\r\nimport * as Actions from \"../../redux/directory/action\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport AlertPopup from \"./Alertpopup\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\ntoast.configure();\r\n\r\nconst ViewLeads = ({ setViewDetailPopup, viewData }) => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { providerJobAccept } = useSelector((state) => state.directory);\r\n  const [alert, setAlert] = useState(false);\r\n  const [alertData, setAlertData] = useState([]);\r\n  const { provider_job_accept_request } = Actions;\r\n  // const handleClose = () => {\r\n  //   setViewDetailPopup(false);\r\n  // };\r\n  const handleAlert = (viewData, e) => {\r\n    e.preventDefault();\r\n    setViewDetailPopup(true);\r\n    setAlertData(viewData);\r\n    setAlert(true);\r\n  };\r\n\r\n  const accepted = (alertData, e) => {\r\n    e.preventDefault();\r\n    const data = { action: \"accept\", id: alertData?.id, type: alertData.type };\r\n    dispatch(provider_job_accept_request(data));\r\n    localStorage.setItem(\"provideLeadAction\", JSON.stringify(\"accept\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (providerJobAccept.success == 1) {\r\n      toast.success(providerJobAccept.message, {\r\n        position: \"bottom-left\",\r\n        autoClose: 2000,\r\n        size: \"small\",\r\n      });\r\n      setViewDetailPopup(false);\r\n    }\r\n\r\n    // setTimeout(() => {\r\n    //   dispatch({ type: \"PROVIDER_JOB_ACCEPT_SUCCESS\", payload: \"\" });\r\n    // }, 1000);\r\n  }, [providerJobAccept]);\r\n\r\n  const tConvert = (time) => {\r\n    // Check correct time format and split into components\r\n    time = time\r\n      .toString()\r\n      .match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\r\n\r\n    if (time.length > 1) {\r\n      // If time format correct\r\n      time = time.slice(1); // Remove full string match value\r\n      time[5] = +time[0] < 12 ? \"AM\" : \"PM\"; // Set AM/PM\r\n      time[0] = +time[0] % 12 || 12; // Adjust hours\r\n    }\r\n    return time.join(\"\"); // return adjusted time or original string\r\n  };\r\n\r\n  const dateConvert = (data) => {\r\n    return new Date(data).toLocaleString(\"en-us\", {\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <section className=\"user-lead-modal popup\" style={{ zIndex: 3 }}>\r\n        <form className=\"popup__form\">\r\n          <div className=\"first\">\r\n            <div className=\"lead-img-box\">\r\n              <img\r\n                src=\"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <div className=\"lead-content-box\">\r\n              <p className=\"heading\">{viewData.full_name}</p>\r\n              <p className=\"date\">\r\n                {viewData && tConvert(viewData.time)} on{\" \"}\r\n                {viewData && dateConvert(viewData.date)}\r\n              </p>\r\n              <p className=\"city\">{viewData.city} ,</p>\r\n            </div>\r\n\r\n            <span\r\n              onClick={(e) => {\r\n                setViewDetailPopup(false);\r\n                e.target.parentElement.parentElement.parentElement.style.display =\r\n                  \"none\";\r\n              }}\r\n              className=\"Closesvg\"\r\n              style={{ marginBottom: \"123px\", marginRight: \"-12px\" }}\r\n            >\r\n              <Close width=\"30px\" height=\"30px\" />\r\n            </span>\r\n          </div>\r\n          <div className=\"second\">\r\n            <div className=\"job_title\">\r\n              <p className=\"title\">Job Title</p>\r\n              <p className=\"description\">{viewData.title}</p>\r\n            </div>\r\n            <div className=\"service_required\">\r\n              <p className=\"title\">Service Required</p>\r\n              <p className=\"description\">Required {viewData.service_name}</p>\r\n            </div>\r\n            <div className=\"service_type\">\r\n              <p className=\"title\">Service Type</p>\r\n              <p className=\"description\">{viewData.tradie_type}</p>\r\n            </div>\r\n            <div className=\"job_description\">\r\n              <p className=\"title\">Job Description</p>\r\n              <p className=\"description\">{viewData.detail}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"user-lead-modal-buttons\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-primary accept\"\r\n              onClick={(e) => {\r\n                accepted(viewData, e);\r\n              }}\r\n            >\r\n              Accept\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-primary reject\"\r\n              onClick={(e) => {\r\n                handleAlert(viewData, e);\r\n              }}\r\n            >\r\n              Reject\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {alert && (\r\n          <AlertPopup\r\n            setAlert={setAlert}\r\n            alertData={alertData}\r\n            setViewDetailPopup={setViewDetailPopup}\r\n          />\r\n        )}\r\n      </section>\r\n    </>\r\n  );\r\n};\r\nexport default ViewLeads;\r\n"]},"metadata":{},"sourceType":"module"}