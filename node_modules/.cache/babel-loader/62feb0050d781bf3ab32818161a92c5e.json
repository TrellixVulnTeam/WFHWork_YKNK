{"ast":null,"code":"import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import OTPInput,{ResendOTP}from\"otp-input-react\";import{useDispatch}from\"react-redux\";import*as Actions from\"../../redux/auth/action\";import{Redirect}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignupPopup=function SignupPopup(props){var submitBtnRef=useRef();var Dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirectpPage=_useState2[0],setRedirectpPage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),OTP=_useState4[0],setOTP=_useState4[1];var verify_otp_Action=Actions.verify_otp_Action,Reset_Signup_Otp_Action=Actions.Reset_Signup_Otp_Action,getCountryList_Action=Actions.getCountryList_Action;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),fillBoxesMsg=_useState6[0],setFillBoxesMsg=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isTimer=_useState8[0],setIsTimer=_useState8[1];useEffect(function(){var resendOtpEl=document.querySelector(\".resendOTP\");var timerContent=resendOtpEl.querySelector(\"span\").textContent;var resendOtpBtn=resendOtpEl.querySelector(\"button\");var timeout;// getting time from timer element\nvar time=Number(timerContent.split(\" \")[0]);if(isTimer){resendOtpBtn.style.cursor=\"default\";submitBtnRef.current.style.cursor=\"pointer\";timeout=setTimeout(function(){setIsTimer(false);},time*1000);}else{resendOtpBtn.style.cursor=\"pointer\";submitBtnRef.current.style.cursor=\"default\";}return function(){clearTimeout(timeout);};},[isTimer]);// if (login === '') {\n// \treturn <Redirect to={`/tradie-my-profile`} />;\n// }\nvar submitOtpCode=function submitOtpCode(){if(OTP.length<=3){setFillBoxesMsg(true);}else{Dispatch(verify_otp_Action({otpcode:OTP,mobileNumber:\"\".concat(props.mobileNumber),tab:props.btnTab?\"provider\":\"user\"}));setTimeout(function(){Dispatch(getCountryList_Action());},300);}setRedirectpPage(true);props.setnamePopup(true);};var resendOtp=function resendOtp(){setIsTimer(true);var data={mobileNumber:props.mobileNumber,tab:props.btnTab?\"provider\":\"user\",countryCode:props.countryCode.split(\"+\")[1]};Dispatch(Reset_Signup_Otp_Action(data));};return/*#__PURE__*/_jsx(\"div\",{className:\"otp_popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"otp_popup__box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"otp_popup__close_icon\",onClick:props.handleClose,children:\"x\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"otp_popup__heading\",children:\"Enter Verification code\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"otp_popup__paragraph\",children:[\"We have sent you a 4 digit verification Code on \",\"\",/*#__PURE__*/_jsxs(\"span\",{children:[props.countryCode,\" \",props.mobileNumber]})]}),/*#__PURE__*/_jsx(OTPInput,{value:OTP,onChange:setOTP,autoFocus:true,OTPLength:4,otpType:\"number\",disabled:false,maxTime:30,className:\"OTPInput\"}),fillBoxesMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"otp_popup__msg\",children:\"Please fill all the boxes\"}),/*#__PURE__*/_jsx(\"button\",{ref:submitBtnRef,className:\"otp_popup__submit\",onClick:submitOtpCode,children:\"Submit\"}),/*#__PURE__*/_jsx(ResendOTP,{maxTime:30,onResendClick:resendOtp,style:{marginTop:\"26px\"},className:\"resendOTP\"})]})});};export default SignupPopup;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/SignUp/signup-verification_popup.js"],"names":["React","useState","useEffect","useRef","OTPInput","ResendOTP","useDispatch","Actions","Redirect","SignupPopup","props","submitBtnRef","Dispatch","redirectpPage","setRedirectpPage","OTP","setOTP","verify_otp_Action","Reset_Signup_Otp_Action","getCountryList_Action","fillBoxesMsg","setFillBoxesMsg","isTimer","setIsTimer","resendOtpEl","document","querySelector","timerContent","textContent","resendOtpBtn","timeout","time","Number","split","style","cursor","current","setTimeout","clearTimeout","submitOtpCode","length","otpcode","mobileNumber","tab","btnTab","setnamePopup","resendOtp","data","countryCode","handleClose","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport OTPInput, { ResendOTP } from \"otp-input-react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport * as Actions from \"../../redux/auth/action\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst SignupPopup = (props) => {\r\n  const submitBtnRef = useRef();\r\n  const Dispatch = useDispatch();\r\n  const [redirectpPage, setRedirectpPage] = useState(false);\r\n  const [OTP, setOTP] = useState(\"\");\r\n  const { verify_otp_Action, Reset_Signup_Otp_Action, getCountryList_Action } =\r\n    Actions;\r\n  const [fillBoxesMsg, setFillBoxesMsg] = useState(false);\r\n\r\n  const [isTimer, setIsTimer] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const resendOtpEl = document.querySelector(\".resendOTP\");\r\n    const timerContent = resendOtpEl.querySelector(\"span\").textContent;\r\n    const resendOtpBtn = resendOtpEl.querySelector(\"button\");\r\n\r\n    let timeout;\r\n    // getting time from timer element\r\n    const time = Number(timerContent.split(\" \")[0]);\r\n\r\n    if (isTimer) {\r\n      resendOtpBtn.style.cursor = \"default\";\r\n      submitBtnRef.current.style.cursor = \"pointer\";\r\n\r\n      timeout = setTimeout(() => {\r\n        setIsTimer(false);\r\n      }, time * 1000);\r\n    } else {\r\n      resendOtpBtn.style.cursor = \"pointer\";\r\n      submitBtnRef.current.style.cursor = \"default\";\r\n    }\r\n\r\n    return () => {\r\n      clearTimeout(timeout);\r\n    };\r\n  }, [isTimer]);\r\n\r\n  // if (login === '') {\r\n  // \treturn <Redirect to={`/tradie-my-profile`} />;\r\n  // }\r\n\r\n  const submitOtpCode = () => {\r\n    if (OTP.length <= 3) {\r\n      setFillBoxesMsg(true);\r\n    } else {\r\n      Dispatch(\r\n        verify_otp_Action({\r\n          otpcode: OTP,\r\n          mobileNumber: `${props.mobileNumber}`,\r\n          tab: props.btnTab ? \"provider\" : \"user\",\r\n        })\r\n      );\r\n      setTimeout(() => {\r\n        Dispatch(getCountryList_Action());\r\n      }, 300);\r\n    }\r\n    setRedirectpPage(true);\r\n    props.setnamePopup(true);\r\n  };\r\n\r\n  const resendOtp = () => {\r\n   \r\n    setIsTimer(true);\r\n    const data = {\r\n      mobileNumber: props.mobileNumber,\r\n      tab: props.btnTab ? \"provider\" : \"user\",\r\n      countryCode: props.countryCode.split(\"+\")[1],\r\n    };\r\n    Dispatch(Reset_Signup_Otp_Action(data));\r\n  };\r\n\r\n  return (\r\n    <div className=\"otp_popup\">\r\n      <div className=\"otp_popup__box\">\r\n        <span className=\"otp_popup__close_icon\" onClick={props.handleClose}>\r\n          x\r\n        </span>\r\n        <h4 className=\"otp_popup__heading\">Enter Verification code</h4>\r\n        <p className=\"otp_popup__paragraph\">\r\n          We have sent you a 4 digit verification Code on {\"\"}\r\n          <span>\r\n            {props.countryCode} {props.mobileNumber}\r\n          </span>\r\n        </p>\r\n        <OTPInput\r\n          value={OTP}\r\n          onChange={setOTP}\r\n          autoFocus\r\n          OTPLength={4}\r\n          otpType=\"number\"\r\n          disabled={false}\r\n          maxTime={30}\r\n          className=\"OTPInput\"\r\n        />\r\n        {fillBoxesMsg && (\r\n          <p className=\"otp_popup__msg\">Please fill all the boxes</p>\r\n        )}\r\n        <button\r\n          ref={submitBtnRef}\r\n          className=\"otp_popup__submit\"\r\n          onClick={submitOtpCode}\r\n        >\r\n          Submit\r\n        </button>\r\n        <ResendOTP\r\n          maxTime={30}\r\n          onResendClick={resendOtp}\r\n          style={{\r\n            marginTop: \"26px\",\r\n          }}\r\n          className=\"resendOTP\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignupPopup;\r\n"]},"metadata":{},"sourceType":"module"}