{"ast":null,"code":"import _objectSpread from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _toConsumableArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';// import * as Actions from '../../redux/auth/action';\nimport{useDispatch}from'react-redux';import{useForm}from'react-hook-form';import{ReactComponent as Close}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/icon-cancelpopup.svg\";import DatePicker from'react-date-picker';import TimePicker from'react-time-picker';import moment from'moment';import*as Actions from'../../redux/directory/action';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TradieRequest=function TradieRequest(_ref){var tradiesIds=_ref.tradiesIds,setModelOpenTradieRequest=_ref.setModelOpenTradieRequest,modelOpenTradieRequest=_ref.modelOpenTradieRequest;var dispatch=useDispatch();var history=useHistory();var user_to_tradie_request=Actions.user_to_tradie_request;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),selectTime=_useState2[0],setSelectTime=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),chooseTimeDate=_useState4[0],setChooseTimeDate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),residential=_useState6[0],setResidential=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),commercial=_useState8[0],setCommercial=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tradie_type=_useState10[0],setTradie_type=_useState10[1];var _useState11=useState({service_type:\"\",time:\"\",date:\"\"}),_useState12=_slicedToArray(_useState11,2),selectService_type=_useState12[0],setSelectService_type=_useState12[1];var _useState13=useState(new Date()),_useState14=_slicedToArray(_useState13,2),date=_useState14[0],setDate=_useState14[1];var _useState15=useState('10:00'),_useState16=_slicedToArray(_useState15,2),time=_useState16[0],setTime=_useState16[1];var onSubmit=function onSubmit(data){if(selectService_type.service_type===\"immediately\"&&tradie_type.length!==0){var tradieRequest={address:data.address,city:\"Perth\",country:\"Australia\",date:selectService_type.date,detail:data.detail,latitude:\"-31.9505269\",longitude:\"115.8604572\",postcode:\"undefined\",search:\"\",search_type:\"\",service_id:\"1\",service_type:selectService_type.service_type,state:\"WA\",time:selectService_type.time,title:data.title,tradie_type:tradie_type.toString(),tradie_id:tradiesIds.toString()};dispatch(user_to_tradie_request(tradieRequest));history.push(\"/user-bookings\");}else if(selectService_type.service_type===\"later\"&&tradie_type.length!==0){var _tradieRequest={address:data.address,city:\"Perth\",country:\"Australia\",date:moment(date).format(\"YYYY-MM-DD\"),detail:data.detail,latitude:\"-31.9505269\",longitude:\"115.8604572\",postcode:\"undefined\",search:\"\",search_type:\"\",service_id:\"1\",service_type:selectService_type.service_type,state:\"WA\",time:time,title:data.title,tradie_type:tradie_type.toString(),tradie_id:tradiesIds.toString()};dispatch(user_to_tradie_request(_tradieRequest));history.push(\"/user-bookings\");}};var handleSelectTime=function handleSelectTime(timeOption){if(timeOption===\"immediately\"){var currentDate=moment().format(\"YYYY-MM-DD\");var currentTime=moment().format(\"hh:mm\");setSelectTime(true);setChooseTimeDate(false);setSelectService_type({service_type:timeOption,date:currentDate,time:currentTime});}else if(timeOption===\"later\"){setSelectTime(false);setChooseTimeDate(true);setSelectService_type({service_type:timeOption,date:\"\",time:\"\"});}};var handleTradieType=function handleTradieType(tradieType){if(tradieType===\"residential\"&&residential===false){setResidential(true);setTradie_type([].concat(_toConsumableArray(tradie_type),[tradieType]));}else if(tradieType===\"residential\"&&residential===true){var data=tradie_type.filter(function(item){return item!==tradieType;});setTradie_type(data);setResidential(false);}else if(tradieType===\"commercial\"&&commercial===false){setCommercial(true);setTradie_type([].concat(_toConsumableArray(tradie_type),[tradieType]));}else if(tradieType===\"commercial\"&&commercial===true){var _data=tradie_type.filter(function(item){return item!==tradieType;});setTradie_type(_data);setCommercial(false);}};if(modelOpenTradieRequest){document.getElementsByTagName(\"html\")[0].classList.add(\"Scroll_disable_onClick\");}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"user-info-modal popupTradieRequest\",style:{zIndex:3},children:/*#__PURE__*/_jsxs(\"form\",{className:\"popupTradieRequest__form\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"REQUEST TRADIE\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){setModelOpenTradieRequest(false);},className:\"Closesvg\",children:/*#__PURE__*/_jsx(Close,{width:\"30px\",height:\"30px\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"input\",_objectSpread({placeholder:\"Job title\",type:\"text\",defaultValue:\"\"},register('title',{required:{value:true,message:'title is required'},minLength:{value:2,message:'min value > 3'}})))}),errors.title&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:errors.title.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"textarea\",_objectSpread({placeholder:\"Job Detail\",type:\"text\",defaultValue:\"\"},register('detail',{required:{value:true,message:'detail is required'},minLength:{value:2,message:'min value > 3'}})))}),errors.detail&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:errors.detail.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"input\",_objectSpread({placeholder:\"Job title\",type:\"text\",defaultValue:\"Perth WA, Australia\"},register('address',{required:{value:true,message:'address is required'},minLength:{value:2,message:'min value > 3'}})))}),errors.address&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:errors.address.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupTradieRequest__btns\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){handleSelectTime(\"immediately\");},style:{color:\"\".concat(selectTime?\"transparent\":\"#666\")},children:\"Immediately\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){handleSelectTime(\"later\");},style:{color:\"\".concat(selectTime===false?\"transparent\":\"#666\")},children:\"Choose Date\"})]}),/*#__PURE__*/_jsx(\"br\",{}),chooseTimeDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"popupTradieRequest__dateTime\",children:[/*#__PURE__*/_jsx(DatePicker,{onChange:setDate,value:date}),/*#__PURE__*/_jsx(TimePicker,{onChange:setTime,value:time})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Select your tradie type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popupTradieRequest__btns\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){handleTradieType(\"residential\");},style:{color:\"\".concat(residential?\"transparent\":\"#666\")},children:\"Residential\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){handleTradieType(\"commercial\");},style:{color:\"\".concat(commercial?\"transparent\":\"#666\")},children:\"Commercial\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{popupTradieRequest__save:true,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",style:{padding:\"20px\"},children:\"Save\"})})]})})});};export default TradieRequest;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/TradieDirectory/TradieRequestModel.js"],"names":["React","useState","useEffect","useDispatch","useForm","DatePicker","TimePicker","moment","Actions","useHistory","TradieRequest","tradiesIds","setModelOpenTradieRequest","modelOpenTradieRequest","dispatch","history","user_to_tradie_request","register","handleSubmit","errors","formState","selectTime","setSelectTime","chooseTimeDate","setChooseTimeDate","residential","setResidential","commercial","setCommercial","tradie_type","setTradie_type","service_type","time","date","selectService_type","setSelectService_type","Date","setDate","setTime","onSubmit","data","length","tradieRequest","address","city","country","detail","latitude","longitude","postcode","search","search_type","service_id","state","title","toString","tradie_id","push","format","handleSelectTime","timeOption","currentDate","currentTime","handleTradieType","tradieType","filter","item","document","getElementsByTagName","classList","add","zIndex","e","marginBottom","required","value","message","minLength","color","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\n// import * as Actions from '../../redux/auth/action';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { ReactComponent as Close } from '../../assets/icons/icon-cancelpopup.svg';\r\nimport DatePicker from 'react-date-picker';\r\nimport TimePicker from 'react-time-picker';\r\nimport moment from 'moment';\r\nimport * as Actions from '../../redux/directory/action';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst TradieRequest = ({ tradiesIds, setModelOpenTradieRequest, modelOpenTradieRequest }) => {\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    const history = useHistory()\r\n    const { user_to_tradie_request } = Actions\r\n    const { register, handleSubmit, formState: { errors } } = useForm();\r\n    const [selectTime, setSelectTime] = useState(false);\r\n    const [chooseTimeDate, setChooseTimeDate] = useState(false);\r\n\r\n    const [residential, setResidential] = useState(false);\r\n    const [commercial, setCommercial] = useState(false);\r\n    const [tradie_type, setTradie_type] = useState([]);\r\n    const [selectService_type, setSelectService_type] = useState({\r\n        service_type: \"\",\r\n        time: \"\",\r\n        date: \"\"\r\n\r\n    });\r\n\r\n    const [date, setDate] = useState(new Date());\r\n    const [time, setTime] = useState('10:00');\r\n\r\n\r\n\r\n\r\n    const onSubmit = (data) => {\r\n        if (selectService_type.service_type === \"immediately\" && tradie_type.length !== 0) {\r\n\r\n            const tradieRequest = {\r\n                address: data.address,\r\n                city: \"Perth\",\r\n                country: \"Australia\",\r\n                date: selectService_type.date,\r\n                detail: data.detail,\r\n                latitude: \"-31.9505269\",\r\n                longitude: \"115.8604572\",\r\n                postcode: \"undefined\",\r\n                search: \"\",\r\n                search_type: \"\",\r\n                service_id: \"1\",\r\n                service_type: selectService_type.service_type,\r\n                state: \"WA\",\r\n                time: selectService_type.time,\r\n                title: data.title,\r\n                tradie_type: tradie_type.toString(),\r\n                tradie_id: tradiesIds.toString()\r\n            }\r\n\r\n\r\n            dispatch(user_to_tradie_request(tradieRequest));\r\n            history.push(\"/user-bookings\")\r\n\r\n        }\r\n\r\n        else if (selectService_type.service_type === \"later\" && tradie_type.length !== 0) {\r\n\r\n            const tradieRequest = {\r\n                address: data.address,\r\n                city: \"Perth\",\r\n                country: \"Australia\",\r\n                date: moment(date).format(\"YYYY-MM-DD\"),\r\n                detail: data.detail,\r\n                latitude: \"-31.9505269\",\r\n                longitude: \"115.8604572\",\r\n                postcode: \"undefined\",\r\n                search: \"\",\r\n                search_type: \"\",\r\n                service_id: \"1\",\r\n                service_type: selectService_type.service_type,\r\n                state: \"WA\",\r\n                time: time,\r\n                title: data.title,\r\n                tradie_type: tradie_type.toString(),\r\n                tradie_id: tradiesIds.toString()\r\n            }\r\n\r\n            dispatch(user_to_tradie_request(tradieRequest));\r\n            history.push(\"/user-bookings\")\r\n\r\n\r\n        }\r\n\r\n\r\n    };\r\n\r\n    const handleSelectTime = (timeOption) => {\r\n        if (timeOption === \"immediately\") {\r\n            const currentDate = moment().format(\"YYYY-MM-DD\");\r\n            const currentTime = moment().format(\"hh:mm\");\r\n\r\n            setSelectTime(true);\r\n            setChooseTimeDate(false);\r\n            setSelectService_type({ service_type: timeOption, date: currentDate, time: currentTime })\r\n        }\r\n        else if (timeOption === \"later\") {\r\n            setSelectTime(false);\r\n            setChooseTimeDate(true);\r\n            setSelectService_type({ service_type: timeOption, date: \"\", time: \"\" })\r\n        }\r\n    }\r\n\r\n\r\n    const handleTradieType = (tradieType) => {\r\n        if (tradieType === \"residential\" && residential === false) {\r\n            setResidential(true);\r\n            setTradie_type([...tradie_type, tradieType])\r\n\r\n        }\r\n        else if (tradieType === \"residential\" && residential === true) {\r\n            const data = tradie_type.filter(function (item) {\r\n                return item !== tradieType\r\n            })\r\n            setTradie_type(data)\r\n\r\n\r\n            setResidential(false);\r\n\r\n        }\r\n\r\n\r\n        else if (tradieType === \"commercial\" && commercial === false) {\r\n            setCommercial(true);\r\n            setTradie_type([...tradie_type, tradieType])\r\n        }\r\n        else if (tradieType === \"commercial\" && commercial === true) {\r\n            const data = tradie_type.filter(function (item) {\r\n                return item !== tradieType\r\n            })\r\n            setTradie_type(data)\r\n            setCommercial(false);\r\n\r\n\r\n        }\r\n    }\r\n    if (modelOpenTradieRequest) {\r\n        document.getElementsByTagName(\"html\")[0].classList.add(\"Scroll_disable_onClick\")\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div >\r\n            <section className=\"user-info-modal popupTradieRequest\" style={{ zIndex: 3 }}>\r\n                <form className=\"popupTradieRequest__form\" onSubmit={handleSubmit(onSubmit)}>\r\n                    <h2>\r\n                        REQUEST TRADIE\r\n                        <span\r\n                            onClick={(e) => {\r\n                                setModelOpenTradieRequest(false)\r\n\r\n                            }}\r\n                            className=\"Closesvg\"\r\n                        >\r\n                            <Close width=\"30px\" height=\"30px\" />\r\n                        </span>\r\n                    </h2>\r\n\r\n\r\n                    <div className=\"input-group\" style={{ marginBottom: '1rem' }}>\r\n                        <input\r\n                            placeholder=\"Job title\"\r\n                            type=\"text\"\r\n                            defaultValue={\"\"}\r\n                            {...register('title', {\r\n                                required: { value: true, message: 'title is required' },\r\n                                minLength: { value: 2, message: 'min value > 3' }\r\n                            })}\r\n                        />\r\n                    </div>\r\n                    {errors.title && <span style={{ color: 'red' }}>{errors.title.message}</span>}\r\n                    <br />\r\n                    <div className=\"input-group\" style={{ marginBottom: '1rem' }}>\r\n                        <textarea\r\n                            placeholder=\"Job Detail\"\r\n                            type=\"text\"\r\n                            defaultValue={\"\"}\r\n                            {...register('detail', {\r\n                                required: { value: true, message: 'detail is required' },\r\n                                minLength: { value: 2, message: 'min value > 3' }\r\n                            })}\r\n                        />\r\n                    </div>\r\n                    {errors.detail && <span style={{ color: 'red' }}>{errors.detail.message}</span>}\r\n                    <br />\r\n\r\n\r\n                    <div className=\"input-group\" style={{ marginBottom: '1rem' }}>\r\n                        <input\r\n                            placeholder=\"Job title\"\r\n                            type=\"text\"\r\n                            defaultValue={\"Perth WA, Australia\"}\r\n                            {...register('address', {\r\n                                required: { value: true, message: 'address is required' },\r\n                                minLength: { value: 2, message: 'min value > 3' }\r\n                            })}\r\n                        />\r\n                    </div>\r\n                    {errors.address && <span style={{ color: 'red' }}>{errors.address.message}</span>}\r\n                    <br />\r\n\r\n                    <div className=\"popupTradieRequest__btns\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                handleSelectTime(\"immediately\")\r\n\r\n                            }}\r\n\r\n                            style={{\r\n                                color: `${selectTime ? \"transparent\" : \"#666\"}`,\r\n                            }}\r\n                        >\r\n                            Immediately\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                handleSelectTime(\"later\")\r\n                            }}\r\n                            style={{\r\n                                color: `${selectTime === false ? \"transparent\" : \"#666\"}`,\r\n                            }}\r\n                        >\r\n                            Choose Date\r\n                        </button>\r\n                    </div>\r\n                    <br />\r\n                    {chooseTimeDate && (\r\n                        <div className=\"popupTradieRequest__dateTime\" >\r\n                            <DatePicker\r\n\r\n                                onChange={setDate}\r\n                                value={date}\r\n                            />\r\n\r\n                            <TimePicker\r\n\r\n                                onChange={setTime}\r\n                                value={time}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <p>Select your tradie type</p>\r\n                    <div className=\"popupTradieRequest__btns\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                handleTradieType(\"residential\")\r\n\r\n                            }}\r\n                            style={{\r\n                                color: `${residential ? \"transparent\" : \"#666\"}`,\r\n                            }}\r\n                        >\r\n                            Residential\r\n                        </button>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                handleTradieType(\"commercial\")\r\n\r\n                            }}\r\n                            style={{\r\n                                color: `${commercial ? \"transparent\" : \"#666\"}`,\r\n                            }}\r\n                        >\r\n                            Commercial\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n                    <br />\r\n                    <div popupTradieRequest__save>\r\n                        <button type=\"submit\" className=\"btn-primary\"\r\n                            style={{ padding: \"20px\" }}\r\n                        >\r\n                            Save\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </section>\r\n        </div >\r\n    );\r\n};\r\nexport default TradieRequest;\r\n"]},"metadata":{},"sourceType":"module"}