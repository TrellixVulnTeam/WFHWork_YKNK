{"ast":null,"code":"var _jsxFileName = \"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\src\\\\pages\\\\TradieLeads\\\\ViewDetailPopup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { ReactComponent as Close } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/icon-cancelpopup.svg\";\nimport * as Actions from \"../../redux/directory/action\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport AlertPopup from \"./Alertpopup\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ntoast.configure();\n\nconst ViewLeads = _ref => {\n  _s();\n\n  let {\n    setViewDetailPopup,\n    viewData\n  } = _ref;\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    providerJobAccept\n  } = useSelector(state => state.directory);\n  const [alert, setAlert] = useState(false);\n  const [alertData, setAlertData] = useState([]);\n  const {\n    provider_job_accept_request\n  } = Actions; // const handleClose = () => {\n  //   setViewDetailPopup(false);\n  // };\n\n  const handleAlert = (viewData, e) => {\n    e.preventDefault();\n    setViewDetailPopup(true);\n    setAlertData(viewData);\n    setAlert(true);\n  };\n\n  const accepted = (alertData, e) => {\n    e.preventDefault();\n    const data = {\n      action: \"accept\",\n      id: alertData === null || alertData === void 0 ? void 0 : alertData.id,\n      type: alertData.type\n    };\n    dispatch(provider_job_accept_request(data));\n    localStorage.setItem(\"provideLeadAction\", JSON.stringify(\"accept\"));\n  };\n\n  useEffect(() => {\n    if (providerJobAccept.success == 1) {\n      toast.success(providerJobAccept.message, {\n        position: \"bottom-left\",\n        autoClose: 2000,\n        size: \"small\"\n      });\n      setViewDetailPopup(false);\n    } // setTimeout(() => {\n    //   dispatch({ type: \"PROVIDER_JOB_ACCEPT_SUCCESS\", payload: \"\" });\n    // }, 1000);\n\n  }, [providerJobAccept]);\n\n  const tConvert = time => {\n    // Check correct time format and split into components\n    time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n    if (time.length > 1) {\n      // If time format correct\n      time = time.slice(1); // Remove full string match value\n\n      time[5] = +time[0] < 12 ? \"AM\" : \"PM\"; // Set AM/PM\n\n      time[0] = +time[0] % 12 || 12; // Adjust hours\n    }\n\n    return time.join(\"\"); // return adjusted time or original string\n  };\n\n  const dateConvert = data => {\n    return new Date(data).toLocaleString(\"en-us\", {\n      month: \"short\",\n      year: \"numeric\",\n      day: \"numeric\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"user-lead-modal popup\",\n      style: {\n        zIndex: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"popup__form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"first\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lead-img-box\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lead-content-box\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"heading\",\n              children: viewData.full_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"date\",\n              children: [viewData && tConvert(viewData.time), \" on\", \" \", viewData && dateConvert(viewData.date)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"city\",\n              children: [viewData.city, \" ,\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              setViewDetailPopup(false);\n              e.target.parentElement.parentElement.parentElement.style.display = \"none\";\n            },\n            className: \"Closesvg\",\n            style: {\n              marginBottom: \"123px\",\n              marginRight: \"-12px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Close, {\n              width: \"30px\",\n              height: \"30px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"second\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"job_title\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"title\",\n              children: \"Job Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"description\",\n              children: viewData.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"service_required\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"title\",\n              children: \"Service Required\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"description\",\n              children: [\"Required \", viewData.service_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"service_type\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"title\",\n              children: \"Service Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"description\",\n              children: viewData.tradie_type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"job_description\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"title\",\n              children: \"Job Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"description\",\n              children: viewData.detail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-lead-modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn-primary accept\",\n            onClick: e => {\n              accepted(viewData, e);\n            },\n            children: \"Accept\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn-primary reject\",\n            onClick: e => {\n              handleAlert(viewData, e);\n            },\n            children: \"Reject\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), alert && /*#__PURE__*/_jsxDEV(AlertPopup, {\n        setAlert: setAlert,\n        alertData: alertData,\n        setViewDetailPopup: setViewDetailPopup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(ViewLeads, \"nQo94KLJiK68gh3kXGDXaj9qf+s=\", false, function () {\n  return [useParams, useHistory, useDispatch, useSelector];\n});\n\n_c = ViewLeads;\nexport default ViewLeads;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewLeads\");","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/TradieLeads/ViewDetailPopup.js"],"names":["React","useEffect","useState","useHistory","Actions","useSelector","useDispatch","useParams","AlertPopup","toast","configure","ViewLeads","setViewDetailPopup","viewData","id","history","dispatch","providerJobAccept","state","directory","alert","setAlert","alertData","setAlertData","provider_job_accept_request","handleAlert","e","preventDefault","accepted","data","action","type","localStorage","setItem","JSON","stringify","success","message","position","autoClose","size","tConvert","time","toString","match","length","slice","join","dateConvert","Date","toLocaleString","month","year","day","zIndex","full_name","date","city","target","parentElement","style","display","marginBottom","marginRight","title","service_name","tradie_type","detail"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,OAAO,KAAKC,OAAZ,MAAyB,8BAAzB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAO,uCAAP;;;AACAA,KAAK,CAACC,SAAN;;AAEA,MAAMC,SAAS,GAAG,QAAsC;AAAA;;AAAA,MAArC;AAAEC,IAAAA,kBAAF;AAAsBC,IAAAA;AAAtB,GAAqC;AACtD,QAAM;AAAEC,IAAAA;AAAF,MAASP,SAAS,EAAxB;AACA,QAAMQ,OAAO,GAAGZ,UAAU,EAA1B;AACA,QAAMa,QAAQ,GAAGV,WAAW,EAA5B;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAwBZ,WAAW,CAAEa,KAAD,IAAWA,KAAK,CAACC,SAAlB,CAAzC;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBnB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACoB,SAAD,EAAYC,YAAZ,IAA4BrB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM;AAAEsB,IAAAA;AAAF,MAAkCpB,OAAxC,CAPsD,CAQtD;AACA;AACA;;AACA,QAAMqB,WAAW,GAAG,CAACZ,QAAD,EAAWa,CAAX,KAAiB;AACnCA,IAAAA,CAAC,CAACC,cAAF;AACAf,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAW,IAAAA,YAAY,CAACV,QAAD,CAAZ;AACAQ,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,GALD;;AAOA,QAAMO,QAAQ,GAAG,CAACN,SAAD,EAAYI,CAAZ,KAAkB;AACjCA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAME,IAAI,GAAG;AAAEC,MAAAA,MAAM,EAAE,QAAV;AAAoBhB,MAAAA,EAAE,EAAEQ,SAAF,aAAEA,SAAF,uBAAEA,SAAS,CAAER,EAAnC;AAAuCiB,MAAAA,IAAI,EAAET,SAAS,CAACS;AAAvD,KAAb;AACAf,IAAAA,QAAQ,CAACQ,2BAA2B,CAACK,IAAD,CAA5B,CAAR;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,mBAArB,EAA0CC,IAAI,CAACC,SAAL,CAAe,QAAf,CAA1C;AACD,GALD;;AAOAlC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgB,iBAAiB,CAACmB,OAAlB,IAA6B,CAAjC,EAAoC;AAClC3B,MAAAA,KAAK,CAAC2B,OAAN,CAAcnB,iBAAiB,CAACoB,OAAhC,EAAyC;AACvCC,QAAAA,QAAQ,EAAE,aAD6B;AAEvCC,QAAAA,SAAS,EAAE,IAF4B;AAGvCC,QAAAA,IAAI,EAAE;AAHiC,OAAzC;AAKA5B,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,KARa,CAUd;AACA;AACA;;AACD,GAbQ,EAaN,CAACK,iBAAD,CAbM,CAAT;;AAeA,QAAMwB,QAAQ,GAAIC,IAAD,IAAU;AACzB;AACAA,IAAAA,IAAI,GAAGA,IAAI,CACRC,QADI,GAEJC,KAFI,CAEE,0CAFF,KAEiD,CAACF,IAAD,CAFxD;;AAIA,QAAIA,IAAI,CAACG,MAAL,GAAc,CAAlB,EAAqB;AACnB;AACAH,MAAAA,IAAI,GAAGA,IAAI,CAACI,KAAL,CAAW,CAAX,CAAP,CAFmB,CAEG;;AACtBJ,MAAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACA,IAAI,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,IAAhB,GAAuB,IAAjC,CAHmB,CAGoB;;AACvCA,MAAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,CAACA,IAAI,CAAC,CAAD,CAAL,GAAW,EAAX,IAAiB,EAA3B,CAJmB,CAIY;AAChC;;AACD,WAAOA,IAAI,CAACK,IAAL,CAAU,EAAV,CAAP,CAZyB,CAYH;AACvB,GAbD;;AAeA,QAAMC,WAAW,GAAInB,IAAD,IAAU;AAC5B,WAAO,IAAIoB,IAAJ,CAASpB,IAAT,EAAeqB,cAAf,CAA8B,OAA9B,EAAuC;AAC5CC,MAAAA,KAAK,EAAE,OADqC;AAE5CC,MAAAA,IAAI,EAAE,SAFsC;AAG5CC,MAAAA,GAAG,EAAE;AAHuC,KAAvC,CAAP;AAKD,GAND;;AAOA,sBACE;AAAA,2BACE;AAAS,MAAA,SAAS,EAAC,uBAAnB;AAA2C,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAlD;AAAA,8BACE;AAAM,QAAA,SAAS,EAAC,aAAhB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,mCACE;AACE,cAAA,GAAG,EAAC,sEADN;AAEE,cAAA,GAAG,EAAC;AAFN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAOE;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,SAAb;AAAA,wBAAwBzC,QAAQ,CAAC0C;AAAjC;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA,yBACG1C,QAAQ,IAAI4B,QAAQ,CAAC5B,QAAQ,CAAC6B,IAAV,CADvB,SAC2C,GAD3C,EAEG7B,QAAQ,IAAImC,WAAW,CAACnC,QAAQ,CAAC2C,IAAV,CAF1B;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eAME;AAAG,cAAA,SAAS,EAAC,MAAb;AAAA,yBAAqB3C,QAAQ,CAAC4C,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,eAgBE;AACE,YAAA,OAAO,EAAG/B,CAAD,IAAO;AACdd,cAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAc,cAAAA,CAAC,CAACgC,MAAF,CAASC,aAAT,CAAuBA,aAAvB,CAAqCA,aAArC,CAAmDC,KAAnD,CAAyDC,OAAzD,GACE,MADF;AAED,aALH;AAME,YAAA,SAAS,EAAC,UANZ;AAOE,YAAA,KAAK,EAAE;AAAEC,cAAAA,YAAY,EAAE,OAAhB;AAAyBC,cAAAA,WAAW,EAAE;AAAtC,aAPT;AAAA,mCASE,QAAC,KAAD;AAAO,cAAA,KAAK,EAAC,MAAb;AAAoB,cAAA,MAAM,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA;AATF;AAAA;AAAA;AAAA;AAAA,kBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eA6BE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,WAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,aAAb;AAAA,wBAA4BlD,QAAQ,CAACmD;AAArC;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,aAAb;AAAA,sCAAqCnD,QAAQ,CAACoD,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eASE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,aAAb;AAAA,wBAA4BpD,QAAQ,CAACqD;AAArC;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF,eAaE;AAAK,YAAA,SAAS,EAAC,iBAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAG,cAAA,SAAS,EAAC,aAAb;AAAA,wBAA4BrD,QAAQ,CAACsD;AAArC;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7BF,eA+CE;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,kCACE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,oBAFZ;AAGE,YAAA,OAAO,EAAGzC,CAAD,IAAO;AACdE,cAAAA,QAAQ,CAACf,QAAD,EAAWa,CAAX,CAAR;AACD,aALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,oBAFZ;AAGE,YAAA,OAAO,EAAGA,CAAD,IAAO;AACdD,cAAAA,WAAW,CAACZ,QAAD,EAAWa,CAAX,CAAX;AACD,aALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/CF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAqEGN,KAAK,iBACJ,QAAC,UAAD;AACE,QAAA,QAAQ,EAAEC,QADZ;AAEE,QAAA,SAAS,EAAEC,SAFb;AAGE,QAAA,kBAAkB,EAAEV;AAHtB;AAAA;AAAA;AAAA;AAAA,cAtEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAiFD,CA/ID;;GAAMD,S;UACWJ,S,EACCJ,U,EACCG,W,EACaD,W;;;KAJ1BM,S;AAgJN,eAAeA,SAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ReactComponent as Close } from \"../../assets/icons/icon-cancelpopup.svg\";\r\nimport * as Actions from \"../../redux/directory/action\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport AlertPopup from \"./Alertpopup\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\ntoast.configure();\r\n\r\nconst ViewLeads = ({ setViewDetailPopup, viewData }) => {\r\n  const { id } = useParams();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { providerJobAccept } = useSelector((state) => state.directory);\r\n  const [alert, setAlert] = useState(false);\r\n  const [alertData, setAlertData] = useState([]);\r\n  const { provider_job_accept_request } = Actions;\r\n  // const handleClose = () => {\r\n  //   setViewDetailPopup(false);\r\n  // };\r\n  const handleAlert = (viewData, e) => {\r\n    e.preventDefault();\r\n    setViewDetailPopup(true);\r\n    setAlertData(viewData);\r\n    setAlert(true);\r\n  };\r\n\r\n  const accepted = (alertData, e) => {\r\n    e.preventDefault();\r\n    const data = { action: \"accept\", id: alertData?.id, type: alertData.type };\r\n    dispatch(provider_job_accept_request(data));\r\n    localStorage.setItem(\"provideLeadAction\", JSON.stringify(\"accept\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (providerJobAccept.success == 1) {\r\n      toast.success(providerJobAccept.message, {\r\n        position: \"bottom-left\",\r\n        autoClose: 2000,\r\n        size: \"small\",\r\n      });\r\n      setViewDetailPopup(false);\r\n    }\r\n\r\n    // setTimeout(() => {\r\n    //   dispatch({ type: \"PROVIDER_JOB_ACCEPT_SUCCESS\", payload: \"\" });\r\n    // }, 1000);\r\n  }, [providerJobAccept]);\r\n\r\n  const tConvert = (time) => {\r\n    // Check correct time format and split into components\r\n    time = time\r\n      .toString()\r\n      .match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\r\n\r\n    if (time.length > 1) {\r\n      // If time format correct\r\n      time = time.slice(1); // Remove full string match value\r\n      time[5] = +time[0] < 12 ? \"AM\" : \"PM\"; // Set AM/PM\r\n      time[0] = +time[0] % 12 || 12; // Adjust hours\r\n    }\r\n    return time.join(\"\"); // return adjusted time or original string\r\n  };\r\n\r\n  const dateConvert = (data) => {\r\n    return new Date(data).toLocaleString(\"en-us\", {\r\n      month: \"short\",\r\n      year: \"numeric\",\r\n      day: \"numeric\",\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <section className=\"user-lead-modal popup\" style={{ zIndex: 3 }}>\r\n        <form className=\"popup__form\">\r\n          <div className=\"first\">\r\n            <div className=\"lead-img-box\">\r\n              <img\r\n                src=\"http://78.46.210.25/tapatradieweb/assets/images/dummy-icon-round.png\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <div className=\"lead-content-box\">\r\n              <p className=\"heading\">{viewData.full_name}</p>\r\n              <p className=\"date\">\r\n                {viewData && tConvert(viewData.time)} on{\" \"}\r\n                {viewData && dateConvert(viewData.date)}\r\n              </p>\r\n              <p className=\"city\">{viewData.city} ,</p>\r\n            </div>\r\n\r\n            <span\r\n              onClick={(e) => {\r\n                setViewDetailPopup(false);\r\n                e.target.parentElement.parentElement.parentElement.style.display =\r\n                  \"none\";\r\n              }}\r\n              className=\"Closesvg\"\r\n              style={{ marginBottom: \"123px\", marginRight: \"-12px\" }}\r\n            >\r\n              <Close width=\"30px\" height=\"30px\" />\r\n            </span>\r\n          </div>\r\n          <div className=\"second\">\r\n            <div className=\"job_title\">\r\n              <p className=\"title\">Job Title</p>\r\n              <p className=\"description\">{viewData.title}</p>\r\n            </div>\r\n            <div className=\"service_required\">\r\n              <p className=\"title\">Service Required</p>\r\n              <p className=\"description\">Required {viewData.service_name}</p>\r\n            </div>\r\n            <div className=\"service_type\">\r\n              <p className=\"title\">Service Type</p>\r\n              <p className=\"description\">{viewData.tradie_type}</p>\r\n            </div>\r\n            <div className=\"job_description\">\r\n              <p className=\"title\">Job Description</p>\r\n              <p className=\"description\">{viewData.detail}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"user-lead-modal-buttons\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-primary accept\"\r\n              onClick={(e) => {\r\n                accepted(viewData, e);\r\n              }}\r\n            >\r\n              Accept\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-primary reject\"\r\n              onClick={(e) => {\r\n                handleAlert(viewData, e);\r\n              }}\r\n            >\r\n              Reject\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {alert && (\r\n          <AlertPopup\r\n            setAlert={setAlert}\r\n            alertData={alertData}\r\n            setViewDetailPopup={setViewDetailPopup}\r\n          />\r\n        )}\r\n      </section>\r\n    </>\r\n  );\r\n};\r\nexport default ViewLeads;\r\n"]},"metadata":{},"sourceType":"module"}