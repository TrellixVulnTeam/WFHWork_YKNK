{"ast":null,"code":"import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Header from\"../../components/Header\";import Footer from\"../../components/Footer\";import{Link}from\"react-router-dom\";import user_bookings__1 from\"../../assets/icons/icon-deadline.png\";import user_bookings__2 from\"../../assets/images/professional-tradie.jpg\";import*as Actions from\"../../redux/directory/action\";import{useSelector,useDispatch}from\"react-redux\";import moment from\"moment\";import{useHistory}from\"react-router\";import TakeDone from\"./TakeDonePopup\";import RateTradie from\"./RateTradie\";import DisputeJob from\"./DisputeJob\";import Section_top_1 from\"../../assets/icons/section-top-directory-before.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Index=function Index(){var dispatch=useDispatch();var history=useHistory();var _useSelector=useSelector(function(state){return state.directory;}),userLeads=_useSelector.userLeads,userLeadHistory=_useSelector.userLeadHistory;var user_leads_request=Actions.user_leads_request,user_single_lead_request=Actions.user_single_lead_request,user_leads_history_request=Actions.user_leads_history_request;var _useState=useState(\"current\"),_useState2=_slicedToArray(_useState,2),tabSelect=_useState2[0],setTabSelect=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),rateAlert=_useState6[0],setRateAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),disputeAlert=_useState8[0],setDisputeAlert=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),rateData=_useState10[0],setRateData=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),disputeData=_useState12[0],setDisputeData=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),alertData=_useState14[0],setAlertData=_useState14[1];var _useSelector2=useSelector(function(state){return state.directory;}),reviewRes=_useSelector2.reviewRes,singleTradieRes=_useSelector2.singleTradieRes,providerJobAccept=_useSelector2.providerJobAccept,disputeRes=_useSelector2.disputeRes;useEffect(function(){dispatch(user_leads_request({lead_type:\"new\"}));dispatch(user_leads_history_request({lead_type:\"history\"}));},[reviewRes,singleTradieRes,providerJobAccept,disputeRes]);var singleTradie=function singleTradie(id){dispatch(user_single_lead_request({jobid:id}));history.push(\"/dashboard-booking-detail/\".concat(id));};var handleAlert=function handleAlert(viewData,e){e.preventDefault();setAlertData(viewData);setAlert(true);};var handleDispute=function handleDispute(viewData,e){e.preventDefault();setDisputeData(viewData);setDisputeAlert(true);};var handleRate=function handleRate(viewData,e){e.preventDefault();setRateData(viewData);setRateAlert(true);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"directory-top-section section-top--calender\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-top__before\",children:/*#__PURE__*/_jsx(\"img\",{src:Section_top_1,alt:\"\"})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"section-top__title\",children:[\"My \",/*#__PURE__*/_jsx(\"span\",{children:\"Bookings\"})]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"section section--calender\",children:/*#__PURE__*/_jsx(\"div\",{className:\"calender\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"calender__back\",children:[\" \",\"Back\",\" \"]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"calender__nav\",children:[/*#__PURE__*/_jsx(\"span\",{href:\"#\",className:tabSelect===\"current\"?\"calender__nav-active\":\"\",onClick:function onClick(){setTabSelect(\"current\");},children:\"Current\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setTabSelect(\"history\");},className:tabSelect===\"history\"?\"calender__nav-active\":\"\",children:\"History\"}),/*#__PURE__*/_jsx(\"span\",{href:\"#\",children:\" \"})]}),tabSelect===\"current\"?/*#__PURE__*/_jsx(\"div\",{className:\"calender__events\",children:Object.keys(userLeads).length>0?userLeads.map(function(userBooking){console.log(\"user booking \",userBooking);return/*#__PURE__*/_jsxs(\"div\",{className:\"event\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"event__budge\",children:userBooking.type==\"multiple\"?userBooking.status==\"completed \"?\"Completed \":userBooking.status==\"open\"?\"Pending\":userBooking.status==\"accept\"?\"Accepted\":userBooking.status==\"active\"?userBooking.job_post.map(function(leads,i){return leads.provider_status==\"completed\"?\"Completed\":leads.provider_status;}):\"\":userBooking.job_post.length>0?userBooking.job_post.map(function(leads,i){return userBooking.type==\"multiple\"?userBooking.status==\"open\"?\"Pending\":leads.provider_status==\"reject\"?/*#__PURE__*/_jsx(\"p\",{children:\"Settled\"},i):leads.provider_status==\"accept\"&&leads.user_status==\"accept\"?\"Accepted\":leads.provider_status==\"completed\"&&leads.user_status==\"completed\"?/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}):leads.provider_status==\"Pending\"?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Pending\"}):\"Pending\":userBooking.dispute==1?leads.user_status==\"completed\"?/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}):\"Disputed\":leads.provider_status==\"reject\"?/*#__PURE__*/_jsx(\"p\",{children:\"Settled\"},i):leads.provider_status==\"accept\"?\"Accepted\":leads.provider_status==\"completed\"?\"Completed\":leads.provider_status==\"completed\"&&leads.user_status==\"accept\"?/*#__PURE__*/_jsx(\"p\",{children:\"Accepted\"}):leads.provider_status==\"Pending\"?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Pending\"}):\"Pending\";}):\"\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"event__what\",children:/*#__PURE__*/_jsx(\"h4\",{children:userBooking.title})}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:user_bookings__1,alt:\"\"}),moment(userBooking.time,[\"HH.mm.ss\"]).format(\"hh:mm A\"),\" \",\"on \",moment(userBooking.date).format(\"ll\")]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){singleTradie(userBooking.id);},className:\"btn-primary\",children:\"View Details\"}),\" \",userBooking.job_post.length>0?userBooking.job_post.map(function(leads,i){return leads.provider_status==\"completed\"&&userBooking.dispute==0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{cursor:\"pointer\",marginRight:\"11px\"},className:\"btn-primary\",onClick:function onClick(e){handleAlert(userBooking,e);},children:\"Confirm\"},i),/*#__PURE__*/_jsx(\"span\",{style:{cursor:\"pointer\"},className:\"btn-secondary\",onClick:function onClick(e){handleDispute(leads,e);},children:\"Raise Dispute\"})]}):\"\";}):\"\"]});}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-listing-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://sample.jploftsolutions.in/tapImages/no-listing.png\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No Booking Found\"})]})}):null,tabSelect===\"history\"?/*#__PURE__*/_jsx(\"div\",{className:\"calender__events\",children:Object.keys(userLeadHistory).length>0?userLeadHistory.map(function(userBooking){return/*#__PURE__*/_jsxs(\"div\",{className:\"event\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"event__budge\",children:userBooking.dispute==1?userBooking.user_status==\"completed\"?/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}):\"Disputed\":userBooking.status==\"deleted\"?\"Deleted\":userBooking.status==\"reject\"?\"Settled\":userBooking.status==\"reject\"?\"Settled\":userBooking.status==\"cancel\"?\"Settled\":userBooking.user_status==\"accept\"?\"Accepted\":userBooking.user_status=\"completed\"?\"Completed\":userBooking.user_status=\"deleted\"?\"Deleted\":\"Declined\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"event__what\",children:/*#__PURE__*/_jsx(\"h4\",{children:userBooking.title})}),/*#__PURE__*/_jsxs(\"p\",{className:\"event__when-where\",children:[/*#__PURE__*/_jsx(\"img\",{src:user_bookings__1,alt:\"\"}),moment(userBooking.time,[\"HH.mm.ss\"]).format(\"hh:mm A\"),\" \",\"on \",moment(userBooking.date).format(\"ll\")]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){singleTradie(userBooking.id);},className:\"btn-primary\",children:\"View Details\"}),userBooking.job_post.length>0?userBooking.job_post.map(function(leads,i){return leads.user_status==\"completed\"&&leads.rating<=0&&leads.rating==null?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{cursor:\"pointer\"}// className=\"btn-primary\"\n,onClick:function onClick(e){handleRate(leads,e);},children:\"\\u2B50RATE THIS TRADIE\"},i)]}):\"\";}):\"\"]});}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-listing-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://sample.jploftsolutions.in/tapImages/no-listing.png\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No History Found\"})]})}):null,alert&&/*#__PURE__*/_jsx(TakeDone,{setAlert:setAlert,alertData:alertData}),rateAlert&&/*#__PURE__*/_jsx(RateTradie,{setRateAlert:setRateAlert,rateData:rateData}),disputeAlert&&/*#__PURE__*/_jsx(DisputeJob,{setDisputeAlert:setDisputeAlert,disputeData:disputeData})]})})}),/*#__PURE__*/_jsx(\"section\",{className:\"section section--left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"professional-tradie\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"professional-tradie__description\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"professional-tradie__title\",children:\"Are you a Professional Tradie?\"}),/*#__PURE__*/_jsx(\"p\",{children:\"If you would like to be part of our Tradie community and are ready to meet new clients today please continue so we can welcome you onboard.\"}),/*#__PURE__*/_jsx(Link,{to:\"/about-us\",className:\"btn-primary\",children:\"Learn More\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"professional-tradie__image\",children:/*#__PURE__*/_jsx(\"img\",{src:user_bookings__2,alt:\"\"})})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Index;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/UserBookings/index.js"],"names":["React","useEffect","useState","Header","Footer","Link","user_bookings__1","user_bookings__2","Actions","useSelector","useDispatch","moment","useHistory","TakeDone","RateTradie","DisputeJob","Index","dispatch","history","state","directory","userLeads","userLeadHistory","user_leads_request","user_single_lead_request","user_leads_history_request","tabSelect","setTabSelect","alert","setAlert","rateAlert","setRateAlert","disputeAlert","setDisputeAlert","rateData","setRateData","disputeData","setDisputeData","alertData","setAlertData","reviewRes","singleTradieRes","providerJobAccept","disputeRes","lead_type","singleTradie","id","jobid","push","handleAlert","viewData","e","preventDefault","handleDispute","handleRate","Section_top_1","Object","keys","length","map","userBooking","console","log","type","status","job_post","leads","i","provider_status","user_status","color","dispute","title","time","format","date","cursor","marginRight","rating"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Header from \"../../components/Header\";\r\nimport Footer from \"../../components/Footer\";\r\nimport { Link } from \"react-router-dom\";\r\nimport user_bookings__1 from \"../../assets/icons/icon-deadline.png\";\r\nimport user_bookings__2 from \"../../assets/images/professional-tradie.jpg\";\r\nimport * as Actions from \"../../redux/directory/action\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { useHistory } from \"react-router\";\r\nimport TakeDone from \"./TakeDonePopup\";\r\nimport RateTradie from \"./RateTradie\";\r\nimport DisputeJob from \"./DisputeJob\";\r\nimport Section_top_1 from \"../../assets/icons/section-top-directory-before.svg\";\r\n\r\n\r\nconst Index = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n  const { userLeads, userLeadHistory } = useSelector(\r\n    (state) => state.directory\r\n  );\r\n\r\n  const {\r\n    user_leads_request,\r\n    user_single_lead_request,\r\n    user_leads_history_request,\r\n  } = Actions;\r\n  const [tabSelect, setTabSelect] = useState(\"current\");\r\n  const [alert, setAlert] = useState(false);\r\n  const [rateAlert, setRateAlert] = useState(false);\r\n  const [disputeAlert, setDisputeAlert] = useState(false);\r\n  const [rateData, setRateData] = useState();\r\n  const [disputeData, setDisputeData] = useState();\r\n  const [alertData, setAlertData] = useState([]);\r\n  const { reviewRes, singleTradieRes, providerJobAccept, disputeRes } =\r\n    useSelector((state) => state.directory);\r\n\r\n  useEffect(() => {\r\n    dispatch(user_leads_request({ lead_type: \"new\" }));\r\n    dispatch(user_leads_history_request({ lead_type: \"history\" }));\r\n  }, [reviewRes, singleTradieRes, providerJobAccept, disputeRes]);\r\n\r\n  const singleTradie = (id) => {\r\n    dispatch(user_single_lead_request({ jobid: id }));\r\n    history.push(`/dashboard-booking-detail/${id}`);\r\n  };\r\n  const handleAlert = (viewData, e) => {\r\n    e.preventDefault();\r\n    setAlertData(viewData);\r\n    setAlert(true);\r\n  };\r\n  const handleDispute = (viewData, e) => {\r\n    e.preventDefault();\r\n    setDisputeData(viewData);\r\n    setDisputeAlert(true);\r\n  };\r\n  const handleRate = (viewData, e) => {\r\n    e.preventDefault();\r\n    setRateData(viewData);\r\n    setRateAlert(true);\r\n  };\r\n \r\n  \r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      {/* <!-- My Bookings --> */}\r\n      <section className=\"directory-top-section section-top--calender\">\r\n      <div className=\"section-top__before\">\r\n          <img src={Section_top_1} alt=\"\" />\r\n        </div>\r\n        <h2 className=\"section-top__title\">\r\n          My <span>Bookings</span>\r\n        </h2>\r\n      </section>\r\n\r\n      <section className=\"section section--calender\">\r\n        <div className=\"calender\">\r\n          <div>\r\n            <Link to=\"/\" className=\"calender__back\">\r\n              {\" \"}\r\n              Back{\" \"}\r\n            </Link>\r\n            <nav className=\"calender__nav\">\r\n              <span\r\n                href=\"#\"\r\n                className={\r\n                  tabSelect === \"current\" ? \"calender__nav-active\" : \"\"\r\n                }\r\n                onClick={() => {\r\n                  setTabSelect(\"current\");\r\n                }}\r\n              >\r\n                Current\r\n              </span>\r\n              <span\r\n                onClick={() => {\r\n                  setTabSelect(\"history\");\r\n                }}\r\n                className={\r\n                  tabSelect === \"history\" ? \"calender__nav-active\" : \"\"\r\n                }\r\n              >\r\n                History\r\n              </span>\r\n              <span href=\"#\"> </span>\r\n            </nav>\r\n            {tabSelect === \"current\" ? (\r\n              <div className=\"calender__events\">\r\n                {Object.keys(userLeads).length > 0 ? (\r\n                  userLeads.map((userBooking) => {\r\n                    console.log(\"user booking \", userBooking);\r\n                    return (\r\n                      <div className=\"event\">\r\n                        <p className=\"event__budge\">\r\n                          {userBooking.type == \"multiple\"\r\n                            ? userBooking.status == \"completed \"\r\n                              ? \"Completed \"\r\n                              : userBooking.status == \"open\"\r\n                              ? \"Pending\"\r\n                              : userBooking.status == \"accept\"\r\n                              ? \"Accepted\"\r\n                              : userBooking.status == \"active\"\r\n                              ? userBooking.job_post.map((leads, i) =>\r\n                                  leads.provider_status == \"completed\"\r\n                                    ? \"Completed\"\r\n                                    : leads.provider_status\r\n                                )\r\n                              : \"\"\r\n                            : userBooking.job_post.length > 0\r\n                            ? userBooking.job_post.map((leads, i) =>\r\n                                userBooking.type == \"multiple\" ? (\r\n                                  userBooking.status == \"open\" ? (\r\n                                    \"Pending\"\r\n                                  ) : leads.provider_status == \"reject\" ? (\r\n                                    <p key={i}>Settled</p>\r\n                                  ) : leads.provider_status == \"accept\" &&\r\n                                    leads.user_status == \"accept\" ? (\r\n                                    \"Accepted\"\r\n                                  ) : leads.provider_status == \"completed\" &&\r\n                                    leads.user_status == \"completed\" ? (\r\n                                    <p>Completed</p>\r\n                                  ) : leads.provider_status == \"Pending\" ? (\r\n                                    <p style={{ color: \"red\" }}>Pending</p>\r\n                                  ) : (\r\n                                    \"Pending\"\r\n                                  )\r\n                                ) : userBooking.dispute == 1 ? (\r\n                                  leads.user_status == \"completed\" ? (\r\n                                    <p>Completed</p>\r\n                                  ) : (\r\n                                    \"Disputed\"\r\n                                  )\r\n                                ) : leads.provider_status == \"reject\" ? (\r\n                                  <p key={i}>Settled</p>\r\n                                ) : leads.provider_status == \"accept\" ? (\r\n                                  \"Accepted\"\r\n\r\n                                ) : leads.provider_status == \"completed\" ? (\r\n                                  \"Completed\"\r\n                                ) : leads.provider_status == \"completed\" &&\r\n                                  leads.user_status == \"accept\" ? (\r\n                                  <p>Accepted</p>\r\n\r\n                                ) : leads.provider_status == \"Pending\" ? (\r\n                                  <p style={{ color: \"red\" }}>Pending</p>\r\n                                ) : (\r\n                                  \"Pending\"\r\n                                )\r\n                              )\r\n                            : \"\"}\r\n                        </p>\r\n                        <br />\r\n                        <div className=\"event__what\">\r\n                          <h4>{userBooking.title}</h4>\r\n                        </div>\r\n                        <p className=\"event__when-where\">\r\n                          <img src={user_bookings__1} alt=\"\" />\r\n                          {moment(userBooking.time, [\"HH.mm.ss\"]).format(\r\n                            \"hh:mm A\"\r\n                          )}{\" \"}\r\n                          on {moment(userBooking.date).format(\"ll\")}\r\n                        </p>\r\n                        <button\r\n                          onClick={() => {\r\n                            singleTradie(userBooking.id);\r\n                          }}\r\n                          className=\"btn-primary\"\r\n                        >\r\n                          View Details\r\n                        </button>{\" \"}\r\n                        {userBooking.job_post.length > 0\r\n                          ? userBooking.job_post.map((leads, i) =>\r\n                              leads.provider_status == \"completed\" &&\r\n                              userBooking.dispute == 0 ? (\r\n                                <>\r\n                                  <br />{\" \"}\r\n                                  <span\r\n                                    key={i}\r\n                                    style={{\r\n                                      cursor: \"pointer\",\r\n                                      marginRight: \"11px\",\r\n                                    }}\r\n                                    className=\"btn-primary\"\r\n                                    onClick={(e) => {\r\n                                      handleAlert(userBooking, e);\r\n                                    }}\r\n                                  >\r\n                                    Confirm\r\n                                  </span>\r\n                                  <span\r\n                                    style={{ cursor: \"pointer\" }}\r\n                                    className=\"btn-secondary\"\r\n                                    onClick={(e) => {\r\n                                      handleDispute(leads, e);\r\n                                    }}\r\n                                  >\r\n                                    Raise Dispute\r\n                                  </span>\r\n                                </>\r\n                              ) : (\r\n                                \"\"\r\n                              )\r\n                            )\r\n                          : \"\"}\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <div className=\"no-listing-box\">\r\n                    <img src=\"https://sample.jploftsolutions.in/tapImages/no-listing.png\" />\r\n                    <p>No Booking Found</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : null}\r\n            {tabSelect === \"history\" ? (\r\n              <div className=\"calender__events\">\r\n                {Object.keys(userLeadHistory).length > 0 ? (\r\n                  userLeadHistory.map((userBooking) => {\r\n                    return (\r\n                      <div className=\"event\">\r\n                        <p className=\"event__budge\">\r\n                          {userBooking.dispute == 1 ? (\r\n                            userBooking.user_status == \"completed\" ? (\r\n                              <p>Completed</p>\r\n                            ) : (\r\n                              \"Disputed\"\r\n                            )\r\n                          ) : userBooking.status == \"deleted\" ? (\r\n                            \"Deleted\"\r\n                          ) : userBooking.status == \"reject\" ? (\r\n                            \"Settled\"\r\n                          ) : userBooking.status == \"reject\" ? (\r\n                            \"Settled\"\r\n                          ) : userBooking.status == \"cancel\" ? (\r\n                            \"Settled\"\r\n                          ) : userBooking.user_status == \"accept\" ? (\r\n                            \"Accepted\"\r\n                          ) : (\r\n                            (userBooking.user_status = \"completed\"\r\n                              ? \"Completed\"\r\n                              : (userBooking.user_status = \"deleted\"\r\n                                  ? \"Deleted\"\r\n                                  : \"Declined\"))\r\n                          )}\r\n                        </p>\r\n                        <br />\r\n                        <div className=\"event__what\">\r\n                          <h4>{userBooking.title}</h4>\r\n                        </div>\r\n                        <p className=\"event__when-where\">\r\n                          <img src={user_bookings__1} alt=\"\" />\r\n                          {moment(userBooking.time, [\"HH.mm.ss\"]).format(\r\n                            \"hh:mm A\"\r\n                          )}{\" \"}\r\n                          on {moment(userBooking.date).format(\"ll\")}\r\n                        </p>\r\n                        <button\r\n                          onClick={() => {\r\n                            singleTradie(userBooking.id);\r\n                          }}\r\n                          className=\"btn-primary\"\r\n                        >\r\n                          View Details\r\n                        </button>\r\n\r\n                        {userBooking.job_post.length > 0\r\n                          ? userBooking.job_post.map((leads, i) =>\r\n                              leads.user_status == \"completed\" &&\r\n                              leads.rating <= 0 &&\r\n                              leads.rating == null ? (\r\n                                <>\r\n                                  <br />\r\n                                  <span\r\n                                    key={i}\r\n                                    style={{\r\n                                      cursor: \"pointer\",\r\n                                    }}\r\n                                    // className=\"btn-primary\"\r\n                                    onClick={(e) => {\r\n                                      handleRate(leads, e);\r\n                                    }}\r\n                                  >\r\n                                    ⭐RATE THIS TRADIE\r\n                                  </span>\r\n                                </>\r\n                              ) : (\r\n                                \"\"\r\n                              )\r\n                            )\r\n                          : \"\"}\r\n                      </div>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <div className=\"no-listing-box\">\r\n                    <img src=\"https://sample.jploftsolutions.in/tapImages/no-listing.png\" />\r\n\r\n                    <p>No History Found</p>\r\n\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : null}\r\n            {alert && <TakeDone setAlert={setAlert} alertData={alertData} />}\r\n            {rateAlert && (\r\n              <RateTradie setRateAlert={setRateAlert} rateData={rateData} />\r\n            )}\r\n            {disputeAlert && (\r\n              <DisputeJob\r\n                setDisputeAlert={setDisputeAlert}\r\n                disputeData={disputeData}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* <!-- Are you a Professional Tradie? --> */}\r\n      <section className=\"section section--left\">\r\n        <div className=\"professional-tradie\">\r\n          <div className=\"professional-tradie__description\">\r\n            <h3 className=\"professional-tradie__title\">\r\n              Are you a Professional Tradie?\r\n            </h3>\r\n            <p>\r\n              If you would like to be part of our Tradie community and are ready\r\n              to meet new clients today please continue so we can welcome you\r\n              onboard.\r\n            </p>\r\n            <Link to=\"/about-us\" className=\"btn-primary\">\r\n              Learn More\r\n            </Link>\r\n          </div>\r\n          <div className=\"professional-tradie__image\">\r\n            <img src={user_bookings__2} alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}