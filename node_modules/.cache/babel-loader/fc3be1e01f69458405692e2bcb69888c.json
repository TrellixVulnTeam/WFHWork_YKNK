{"ast":null,"code":"import _objectSpread from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\New folder\\\\TapaTradieWebsite20-01-2022\\\\WFHWork\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import Select from\"react-select\";import*as Actions from\"../../redux/auth/action\";import{useDispatch,useSelector}from\"react-redux\";import{useForm}from\"react-hook-form\";import{Redirect}from\"react-router\";import{useHistory}from\"react-router-dom\";import{ReactComponent as Close}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/icons/icon-cancelpopup.svg\";import Upload from\"../../assets/icons/user.png\";// Handling Form with Formik\nimport{Formik,Form}from\"formik\";// Handling Form Validation with yup\nimport*as Yup from\"yup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Pop1=function Pop1(){var _useSelector=useSelector(function(state){return state.auth;}),userData=_useSelector.userData,editProfile=_useSelector.editProfile;var full_name=userData.full_name,email=userData.email,mobile=userData.mobile,profile_pic=userData.profile_pic,id=userData.id,country_code=userData.country_code,online_address=userData.online_address;var dispatch=useDispatch();var history=useHistory();var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirectpop2=_useState2[0],setRedirectpop2=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),uploadImg=_useState4[0],setUploadImg=_useState4[1];var Signup_User_Completion_Action=Actions.Signup_User_Completion_Action,User_Profile_Get_Information_Action=Actions.User_Profile_Get_Information_Action,upload_user_Profile_picture_Action=Actions.upload_user_Profile_picture_Action;var initialValues={fullNamee:full_name,EmailAddress:email,country_code:country_code,number:mobile,address:online_address};var validationSchema=Yup.object().shape({fullNamee:Yup.string().required(\"Full Namee is required\"),EmailAddress:Yup.string().required(\"Email is required\").email(),country_code:Yup.string().required(\"Country code is required\").min(2).max(5),number:Yup.string().required(\"Number is required\").min(6).max(16),address:Yup.string().required(\"address is required\")});var handleSubmit=function handleSubmit(data){dispatch(Signup_User_Completion_Action(data));};if(editProfile===\"Data successfully updated.\"){return/*#__PURE__*/_jsx(Redirect,{to:\"/user-profile\"});}var showMyImage=function showMyImage(fileInput){var files=fileInput.files;for(var i=0;i<files.length;i++){var file=files[i];var imageType=/image.*/;if(!file.type.match(imageType)){continue;}var img=document.getElementById(\"thumbnil\");var imageClose=document.getElementById(\"imageClose\");img.file=file;var reader=new FileReader();reader.onload=function(aImg){return function(e){aImg.src=e.target.result;imageClose.style.opacity=\"1\";};}(img);reader.readAsDataURL(file);}};var handleRemoveImage=function handleRemoveImage(){var img=document.getElementById(\"thumbnil\");var imageClose=document.getElementById(\"imageClose\");imageClose.style.opacity=\"0\";img.src=Upload;setUploadImg(\"\");};var fileToDataUri=function fileToDataUri(image){return new Promise(function(res){var reader=new FileReader();var type=image.type,name=image.name,size=image.size;reader.addEventListener(\"load\",function(){res({base64:reader.result,name:name,type:type,size:size});});reader.readAsDataURL(image);});};var handleImageChangeInput=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,file,newImagesPromises,i,newImages;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:target=event.target;file=[target.files[0]];newImagesPromises=[];for(i=0;i<target.files.length;i++){newImagesPromises.push(fileToDataUri(target.files[i]));}_context.next=6;return Promise.all(newImagesPromises);case 6:newImages=_context.sent;// console.log(\"files \", file[0]);\ndispatch(upload_user_Profile_picture_Action(file));case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleImageChangeInput(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"user-info-modal popup\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Formik,{enableReinitialize:\"true\",initialValues:initialValues,onSubmit:handleSubmit,validationSchema:validationSchema,children:function children(formik,isSubmitting){var _formik$values$fullNa,_formik$values$fullNa2;return/*#__PURE__*/_jsxs(Form,{autoComplete:\"off\",className:\"popup__form\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Edit Your Details\",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){e.target.parentElement.parentElement.parentElement.style.display=\"none\";history.push(\"/user-profile\");},className:\"Closesvg\",children:/*#__PURE__*/_jsx(Close,{width:\"30px\",height:\"30px\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Upload Profile pic\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"imageClose\",style:{opacity:\"0\"},onClick:function onClick(){handleRemoveImage();},children:/*#__PURE__*/_jsx(Close,{width:\"15px\",height:\"15px\"})}),/*#__PURE__*/_jsx(\"label\",{for:\"file-input\",children:/*#__PURE__*/_jsx(\"img\",{id:\"thumbnil\",className:\"userProfile\",src:profile_pic===\"\"?Upload:\"https://api.tapatradie.com/profile/\".concat(id,\"/\")+profile_pic})}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({value:uploadImg,id:\"file-input\",type:\"file\",style:{display:\"none\"}},register(\"uploadImage\",{})),{},{onChange:function onChange(e){showMyImage(e.target);handleImageChangeInput(e);}}))]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:\"1rem\"},children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Full name\",type:\"text\",name:\"fullNamee\",onChange:formik.handleChange,value:((_formik$values$fullNa=formik.values.fullNamee)===null||_formik$values$fullNa===void 0?void 0:_formik$values$fullNa.charAt(0).toUpperCase())+((_formik$values$fullNa2=formik.values.fullNamee)===null||_formik$values$fullNa2===void 0?void 0:_formik$values$fullNa2.slice(1))})}),formik.errors.fullNamee&&formik.touched.fullNamee?/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\"},children:[formik.errors.fullNamee,\" \"]}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:\"1rem\"},children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",type:\"Email\",name:\"EmailAddress\",onChange:formik.handleChange,value:formik.values.EmailAddress})}),formik.errors.EmailAddress&&formik.touched.EmailAddress?/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\"},children:[formik.errors.EmailAddress,\" \"]}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",style:{marginBottom:\"1rem\",display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Country Code\",name:\"country_code\",onChange:formik.handleChange,value:formik.values.country_code}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Number\",name:\"number\",onChange:formik.handleChange,value:formik.values.number})]}),formik.errors.number&&formik.touched.number?/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\"},children:[formik.errors.number,\" \"]}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",style:{marginBottom:\"1rem\"},children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Address\",type:\"text\",name:\"address\",onChange:formik.handleChange,value:formik.values.address})}),formik.errors.address&&formik.touched.address?/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\"},children:[formik.errors.address,\" \"]}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"Save\"})]});}})]})});};export default Pop1;","map":{"version":3,"sources":["F:/New folder/TapaTradieWebsite20-01-2022/WFHWork/src/pages/UserEditProfile/index.js"],"names":["React","useState","Select","Actions","useDispatch","useSelector","useForm","Redirect","useHistory","Upload","Formik","Form","Yup","Pop1","state","auth","userData","editProfile","full_name","email","mobile","profile_pic","id","country_code","online_address","dispatch","history","register","errors","formState","redirectpop2","setRedirectpop2","uploadImg","setUploadImg","Signup_User_Completion_Action","User_Profile_Get_Information_Action","upload_user_Profile_picture_Action","initialValues","fullNamee","EmailAddress","number","address","validationSchema","object","shape","string","required","min","max","handleSubmit","data","showMyImage","fileInput","files","i","length","file","imageType","type","match","img","document","getElementById","imageClose","reader","FileReader","onload","aImg","e","src","target","result","style","opacity","readAsDataURL","handleRemoveImage","fileToDataUri","image","Promise","res","name","size","addEventListener","base64","handleImageChangeInput","event","newImagesPromises","push","all","newImages","formik","isSubmitting","parentElement","display","marginBottom","handleChange","values","charAt","toUpperCase","slice","touched","color","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Select from \"react-select\";\r\nimport * as Actions from \"../../redux/auth/action\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport { Redirect } from \"react-router\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ReactComponent as Close } from \"../../assets/icons/icon-cancelpopup.svg\";\r\nimport Upload from \"../../assets/icons/user.png\";\r\n// Handling Form with Formik\r\nimport { Formik, Form } from \"formik\";\r\n// Handling Form Validation with yup\r\nimport * as Yup from \"yup\";\r\n\r\nconst Pop1 = () => {\r\n  const { userData, editProfile } = useSelector((state) => state.auth);\r\n  const {\r\n    full_name,\r\n    email,\r\n    mobile,\r\n    profile_pic,\r\n    id,\r\n    country_code,\r\n    online_address,\r\n  } = userData;\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    // handleSubmit,\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  const [redirectpop2, setRedirectpop2] = useState(false);\r\n  const [uploadImg, setUploadImg] = useState(\"\");\r\n  const {\r\n    Signup_User_Completion_Action,\r\n    User_Profile_Get_Information_Action,\r\n    upload_user_Profile_picture_Action,\r\n  } = Actions;\r\n\r\n  const initialValues = {\r\n    fullNamee: full_name,\r\n    EmailAddress: email,\r\n    country_code: country_code,\r\n    number: mobile,\r\n    address: online_address,\r\n  };\r\n  const validationSchema = Yup.object().shape({\r\n    fullNamee: Yup.string().required(\"Full Namee is required\"),\r\n    EmailAddress: Yup.string().required(\"Email is required\").email(),\r\n    country_code: Yup.string()\r\n      .required(\"Country code is required\")\r\n      .min(2)\r\n      .max(5),\r\n    number: Yup.string().required(\"Number is required\").min(6).max(16),\r\n    address: Yup.string().required(\"address is required\"),\r\n  });\r\n\r\n  const handleSubmit = (data) => {\r\n    dispatch(Signup_User_Completion_Action(data));\r\n  };\r\n\r\n  if (editProfile === \"Data successfully updated.\") {\r\n    return <Redirect to=\"/user-profile\" />;\r\n  }\r\n\r\n  const showMyImage = (fileInput) => {\r\n    var files = fileInput.files;\r\n    for (var i = 0; i < files.length; i++) {\r\n      var file = files[i];\r\n      var imageType = /image.*/;\r\n      if (!file.type.match(imageType)) {\r\n        continue;\r\n      }\r\n      var img = document.getElementById(\"thumbnil\");\r\n      var imageClose = document.getElementById(\"imageClose\");\r\n      img.file = file;\r\n      var reader = new FileReader();\r\n      reader.onload = (function (aImg) {\r\n        return function (e) {\r\n          aImg.src = e.target.result;\r\n          imageClose.style.opacity = \"1\";\r\n        };\r\n      })(img);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n  const handleRemoveImage = () => {\r\n    var img = document.getElementById(\"thumbnil\");\r\n    var imageClose = document.getElementById(\"imageClose\");\r\n    imageClose.style.opacity = \"0\";\r\n    img.src = Upload;\r\n    setUploadImg(\"\");\r\n  };\r\n\r\n  const fileToDataUri = (image) => {\r\n    return new Promise((res) => {\r\n      const reader = new FileReader();\r\n      const { type, name, size } = image;\r\n      reader.addEventListener(\"load\", () => {\r\n        res({\r\n          base64: reader.result,\r\n          name: name,\r\n          type,\r\n          size: size,\r\n        });\r\n      });\r\n      reader.readAsDataURL(image);\r\n    });\r\n  };\r\n\r\n  const handleImageChangeInput = async (event) => {\r\n    const { target } = event;\r\n    const file = [target.files[0]];\r\n    const newImagesPromises = [];\r\n    for (let i = 0; i < target.files.length; i++) {\r\n      newImagesPromises.push(fileToDataUri(target.files[i]));\r\n    }\r\n    const newImages = await Promise.all(newImagesPromises);\r\n    // console.log(\"files \", file[0]);\r\n    dispatch(upload_user_Profile_picture_Action(file));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <section className=\"user-info-modal popup\">\r\n        <br />\r\n        <Formik\r\n          enableReinitialize=\"true\"\r\n          initialValues={initialValues}\r\n          onSubmit={handleSubmit}\r\n          validationSchema={validationSchema}\r\n        >\r\n          {(formik, isSubmitting) => {\r\n            return (\r\n              <Form autoComplete=\"off\" className=\"popup__form\">\r\n                {/* <form className=\"popup__form\" onSubmit={handleSubmit(onSubmit)}> */}\r\n                <h2>\r\n                  Edit Your Details\r\n                  <span\r\n                    onClick={(e) => {\r\n                      e.target.parentElement.parentElement.parentElement.style.display =\r\n                        \"none\";\r\n                      history.push(\"/user-profile\");\r\n                    }}\r\n                    className=\"Closesvg\"\r\n                  >\r\n                    <Close width=\"30px\" height=\"30px\" />\r\n                  </span>\r\n                </h2>\r\n\r\n                <div className=\"input-group\" style={{ marginBottom: \"1rem\" }}>\r\n                  <p>Upload Profile pic</p>\r\n                  <br />\r\n                  <div\r\n                    id=\"imageClose\"\r\n                    style={{ opacity: \"0\" }}\r\n                    onClick={() => {\r\n                      handleRemoveImage();\r\n                    }}\r\n                  >\r\n                    <Close width=\"15px\" height=\"15px\" />\r\n                  </div>\r\n                  <label for=\"file-input\">\r\n                    <img\r\n                      id=\"thumbnil\"\r\n                      className=\"userProfile\"\r\n                      src={\r\n                        profile_pic === \"\"\r\n                          ? Upload\r\n                          : `https://api.tapatradie.com/profile/${id}/` + profile_pic\r\n                      }\r\n                    />\r\n                  </label>\r\n\r\n                  <input\r\n                    value={uploadImg}\r\n                    id=\"file-input\"\r\n                    type=\"file\"\r\n                    style={{ display: \"none\" }}\r\n                    {...register(\"uploadImage\", {})}\r\n                    onChange={(e) => {\r\n                      showMyImage(e.target);\r\n\r\n                      handleImageChangeInput(e);\r\n                    }}\r\n                  />\r\n                </div>\r\n                <br />\r\n                <div className=\"input-group\" style={{ marginBottom: \"1rem\" }}>\r\n                  <input\r\n                    placeholder=\"Full name\"\r\n                    type=\"text\"\r\n                    name=\"fullNamee\"\r\n                    onChange={formik.handleChange}\r\n                    value={\r\n                      formik.values.fullNamee?.charAt(0).toUpperCase() +\r\n                      formik.values.fullNamee?.slice(1)\r\n                    }\r\n                  />\r\n                </div>\r\n\r\n                {formik.errors.fullNamee && formik.touched.fullNamee ? (\r\n                  <span style={{ color: \"red\" }}>\r\n                    {formik.errors.fullNamee}{\" \"}\r\n                  </span>\r\n                ) : null}\r\n\r\n                <br />\r\n                <div className=\"input-group\" style={{ marginBottom: \"1rem\" }}>\r\n                  <input\r\n                    placeholder=\"Email\"\r\n                    type=\"Email\"\r\n                    name=\"EmailAddress\"\r\n                    onChange={formik.handleChange}\r\n                    value={formik.values.EmailAddress}\r\n                  />\r\n                </div>\r\n                {formik.errors.EmailAddress && formik.touched.EmailAddress ? (\r\n                  <span style={{ color: \"red\" }}>\r\n                    {formik.errors.EmailAddress}{\" \"}\r\n                  </span>\r\n                ) : null}\r\n                <br />\r\n\r\n                <div\r\n                  className=\"input-group\"\r\n                  style={{\r\n                    marginBottom: \"1rem\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                  }}\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Country Code\"\r\n                    name=\"country_code\"\r\n                    onChange={formik.handleChange}\r\n                    value={formik.values.country_code}\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Number\"\r\n                    name=\"number\"\r\n                    onChange={formik.handleChange}\r\n                    value={formik.values.number}\r\n                  />\r\n                </div>\r\n                {formik.errors.number && formik.touched.number ? (\r\n                  <span style={{ color: \"red\" }}>{formik.errors.number} </span>\r\n                ) : null}\r\n                <br />\r\n                <div className=\"input-group\" style={{ marginBottom: \"1rem\" }}>\r\n                  <input\r\n                    placeholder=\"Address\"\r\n                    type=\"text\"\r\n                    name=\"address\"\r\n                    onChange={formik.handleChange}\r\n                    value={formik.values.address}\r\n                  />\r\n                </div>\r\n                {formik.errors.address && formik.touched.address ? (\r\n                  <span style={{ color: \"red\" }}>{formik.errors.address} </span>\r\n                ) : null}\r\n                <br />\r\n                <br />\r\n                <button type=\"submit\" className=\"btn-primary\">\r\n                  Save\r\n                </button>\r\n                {/* </form> */}\r\n              </Form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\nexport default Pop1;\r\n"]},"metadata":{},"sourceType":"module"}